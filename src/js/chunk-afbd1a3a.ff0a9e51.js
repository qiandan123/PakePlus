(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-afbd1a3a"],{"0cf4":function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("u-linear-layout",{ref:"linear_layout_kt_1",attrs:{gap:"none"}},[i("u-linear-layout",{ref:"linear_layout_kt_10",class:"cw-style-height cw-style-margin-top cw-style-margin",staticStyle:{"--cw-style-height":"auto","--cw-style-margin-top":"12px","margin-top":"12px","--update-key":"1q39",overflow:"auto",height:"auto"},attrs:{direction:"horizontal",wrap:!0}},[i("u-linear-layout",{ref:"linear_layout_kt_11",class:"cw-style-width",staticStyle:{"--cw-style-width":"100%",width:"100%",height:"auto"},attrs:{direction:"horizontal",wrap:!0}},[i("u-divider",{ref:"divider_1",attrs:{dashed:"a",contentPosition:"center"}},[i("u-text",{ref:"text_965",staticStyle:{"--cw-style-font-size":"20px","--cw-style-color":"#ffffff",color:"#ffffff","font-size":"20px"},attrs:{text:"机器数据备份 ",display:"inline"}})],1),i("u-grid-layout-row",{ref:"grid_layout_row_2W_3",class:"cw-style-height cw-style-margin-left cw-style-margin cw-style-margin-bottom cw-style-margin-top cw-style-margin-right",staticStyle:{"--cw-style-height":"31vh","--cw-style-margin-left":"0px","--cw-style-margin-bottom":"8px","--cw-style-margin-top":"0px","--cw-style-margin-right":"0px","margin-left":"0px","--update-key":"a2yg","margin-right":"0px","margin-top":"0px","margin-bottom":"8px",height:"auto"},attrs:{repeat:24}},[i("u-linear-layout",{ref:"linear_layout_kt_12",staticStyle:{"--cw-style-width":"100%",width:"100%"},attrs:{direction:"horizontal",wrap:!0}},[i("u-linear-layout",{ref:"bottom_buttons",class:"cw-style-height cw-style-background-color",staticStyle:{"--cw-style-height":"100px","--cw-style-background-color":"#2c3e50",height:"120px","background-color":"#2c3e50",width:"100%"},attrs:{direction:"horizontal",wrap:!0}},[i("u-grid-layout-row",{ref:"grid_layout_row_2W_3",class:"cw-style-height cw-style-margin-left cw-style-margin cw-style-margin-bottom cw-style-margin-top cw-style-margin-right",staticStyle:{"--cw-style-height":"31vh","--cw-style-margin-left":"0px","--cw-style-margin-bottom":"8px","--cw-style-margin-top":"0px","--cw-style-margin-right":"0px","margin-left":"0px","--update-key":"a2yg","margin-right":"0px","margin-top":"0px","margin-bottom":"8px",height:"40%",width:"100%"},attrs:{repeat:24}},[i("u-text",{ref:"instruction_label",class:"cw-style-height cw-style-color",staticStyle:{"--cw-style-height":"40px","--cw-style-color":"#ffffff","font-size":"20px","margin-left":"15px",width:"100px",height:"40px",color:"#ffffff",display:"flex","align-items":"center","justify-content":"flex-end","padding-right":"10px"},attrs:{text:"备份地址"}}),i("u-linear-layout",{ref:"instruction_input_container",class:"cw-style-height",staticStyle:{"cw-style-height":"40px",height:"50px",width:"900px",border:"2px solid #0078d7","background-color":"#f6f2f2",display:"flex","align-items":"center","justify-content":"center"},attrs:{direction:"horizontal",wrap:!0}},[i("u-input",{key:"number_input_kt_51111",ref:"number_input_kt_51111",class:"cw-style-border-style cw-style-border-left-width cw-style-border-width cw-style-border-right-width cw-style-border-top-width cw-style-border-bottom-width cw-style-border-top-left-radius cw-style-border-radius cw-style-border-top-right-radius cw-style-border-bottom-left-radius cw-style-border-bottom-right-radius",staticStyle:{"font-size":"20px",height:"45px",width:"900px","--cw-style-border-style":"solid","--cw-style-border-left-width":"0px","--cw-style-border-right-width":"0px","--cw-style-border-top-width":"0px","--cw-style-border-bottom-width":"0px","--cw-style-border-top-left-radius":"0px","--cw-style-border-top-right-radius":"0px","--cw-style-border-bottom-left-radius":"0px","--cw-style-border-bottom-right-radius":"0px","border-top-left-radius":"0px","border-top-right-radius":"0px","border-bottom-right-radius":"0px","border-bottom-left-radius":"0px","--update-key":"3nnv","border-top-width":"0px","border-left-width":"0px","border-right-width":"0px","border-bottom-width":"0px","border-style":"solid","--number-input-button-padding":"0 0px"},attrs:{value:t.gridSearch,hideButtons:!0,clearable:!0},on:{"update:value":function(e){t.gridSearch=e},focus:function(e){return t.onTestDataInputFocus("gridSearch",t.gridSearch)}}}),i("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:t.handleFileChange}})],1)],1),i("u-grid-layout-row",{ref:"grid_layout_row_2W_3",class:"cw-style-height cw-style-margin-left cw-style-margin cw-style-margin-bottom cw-style-margin-top cw-style-margin-right",staticStyle:{"--cw-style-height":"31vh","--cw-style-margin-left":"0px","--cw-style-margin-bottom":"8px","--cw-style-margin-top":"0px","--cw-style-margin-right":"0px","margin-left":"0px","--update-key":"a2yg","margin-right":"0px","margin-top":"0px","margin-bottom":"8px",height:"40%",width:"100%"},attrs:{direction:"horizontal",repeat:24}},[i("u-button",{directives:[{name:"longpress",rawName:"v-longpress"}],key:"button_2W_38",ref:"button_2W_38",class:"cw-style-width cw-style-height cw-style-padding-top cw-style-padding cw-style-margin-bottom cw-style-margin cw-style-margin-right cw-style-font-size",staticStyle:{"--cw-style-width":"30.33%","--cw-style-height":"50px","--cw-style-padding-top":"13px","--cw-style-margin-bottom":"8px","--cw-style-margin-right":"8px","--cw-style-font-size":"26px",height:"60px","--update-key":"kdod","padding-top":"13px","font-size":"26px","margin-right":"8px","margin-left":"505px",width:"24.33%","margin-bottom":"8px","--custom-start":"auto",background:"linear-gradient(180deg, #4a90e2 0%, #4a90e2 100%)"},attrs:{display:"inline",color:"primary",text:"备份"},on:{mouseup:function(e){return t.savePlcData()}}}),i("u-button",{directives:[{name:"longpress",rawName:"v-longpress"}],key:"button_2W_39",ref:"button_2W_39",class:"cw-style-width cw-style-height cw-style-padding-top cw-style-padding cw-style-margin-bottom cw-style-margin cw-style-margin-right cw-style-font-size",staticStyle:{"--cw-style-width":"30.33%","--cw-style-height":"50px","--cw-style-padding-top":"13px","--cw-style-margin-bottom":"8px","--cw-style-margin-right":"8px","--cw-style-font-size":"26px",height:"60px","--update-key":"kdod","padding-top":"13px","font-size":"26px","margin-right":"8px",width:"24.33%","margin-bottom":"8px","--custom-start":"auto",background:"linear-gradient(180deg, #4a90e2 0%, #4a90e2 100%)"},attrs:{display:"inline",color:"primary",text:"恢复"},on:{mouseup:function(e){return t.openFileManager()}}})],1)],1),i("u-linear-layout",{ref:"bottom_buttons",class:"cw-style-height cw-style-background-color",staticStyle:{"--cw-style-height":"100px","--cw-style-background-color":"#2c3e50",height:"350px","background-color":"#2c3e50",width:"100%"},attrs:{direction:"horizontal",wrap:!0}},[i("u-divider",{ref:"divider_1",attrs:{dashed:"a",contentPosition:"center"}},[i("u-text",{ref:"text_965",staticStyle:{"--cw-style-font-size":"20px","--cw-style-color":"#ffffff",color:"#ffffff","font-size":"20px"},attrs:{text:"日志 ",display:"inline"}})],1),i("u-grid-layout-row",{ref:"grid_layout_row_2W_3",class:"cw-style-height cw-style-margin-left cw-style-margin cw-style-margin-bottom cw-style-margin-top cw-style-margin-right",staticStyle:{"--cw-style-height":"31vh","--cw-style-margin-left":"0px","--cw-style-margin-bottom":"8px","--cw-style-margin-top":"0px","--cw-style-margin-right":"0px","margin-left":"0px","--update-key":"a2yg","margin-right":"0px","margin-top":"0px","margin-bottom":"8px",height:"10%"},attrs:{repeat:24}},[i("u-linear-layout",{ref:"instruction_input_container",class:"cw-style-height",staticStyle:{"cw-style-height":"40px","margin-left":"15px",height:"300px",width:"1000px",border:"2px solid #0078d7","background-color":"#f6f2f2",display:"flex","align-items":"center","justify-content":"center"},attrs:{direction:"horizontal",wrap:!0}},[i("textarea",{staticStyle:{width:"1000px",height:"300px","font-size":"18px"},attrs:{id:"textArea",rows:"10",cols:"50"}}),i("br")])],1)],1)],1)],1)],1)],1),i("KeyboardDialog",{attrs:{input:t.gridSearch},on:{"update:input":function(e){t.gridSearch=e}},model:{value:t.showLetterKeyboardDialog,callback:function(e){t.showLetterKeyboardDialog=e},expression:"showLetterKeyboardDialog"}}),i("DeviceLoadingDialog",{attrs:{visible:t.loadingDialogVisible}})],1)},a=[],o=(i("1951"),i("450d"),i("eedf")),s=i.n(o),n=(i("10cb"),i("f3ad")),l=i.n(n),c=(i("eca7"),i("3787")),d=i.n(c),g=(i("425f"),i("4105")),p=i.n(g),h=(i("b7ef"),i("8617")),y=i("69d3"),u=i("65b2");const w={mounted(){document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.onKeyUp)},beforeDestroy(){document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp)},methods:{async onKeyDown(t){},async onKeyUp(t){}}};var m={components:{KeyboardDialog:h["a"],DeviceLoadingDialog:y["a"],ElForm:p.a,ElFormItem:d.a,ElInput:l.a,ElButton:s.a},mixins:[w],watch:{},data(){return{loadingDialogVisible:!1,currentType:"",trayNum:void 0,showLetterKeyboardDialog:!1,data:this.$genInitFromSchema("nasl.collection.List<app.structures.TrayPickingByGridDto>",void 0),gridSearch:void 0,goodsCodeSearch:void 0,inventorySearch:void 0,locationSearch:void 0,dataOld:this.$genInitFromSchema("nasl.collection.List<app.structures.TrayPickingByGridDto>",void 0),isClean:!1,goodsDescrSearch:void 0,selectedFile:void 0,lastInsertPos:0,"private-data-source-cache":new Map,fileForm:{imgSavePath:""},log:""}},computed:{},meta:{title:"栅格模式",crumb:void 0,crumbI18n:void 0,first:void 0,auth:void 0},methods:{async insertText(t){let e=textArea.value;this.lastInsertPos>0&&(e=e.substring(0,this.lastInsertPos)+"\n"+e.substring(this.lastInsertPos),this.lastInsertPos++),e=e.substring(0,this.lastInsertPos)+t+e.substring(this.lastInsertPos),textArea.value=e,this.lastInsertPos+=t.length,textArea.selectionStart=textArea.selectionEnd=this.lastInsertPos},openFileManager(){this.$refs.fileInput.click()},async handleFileChange(t){const e="数据恢复 - 备份地址",i=btoa(unescape(encodeURIComponent(e))),r=t.target.files[0];console.log("Selected file:",r);const a=new FormData;a.append("file",r),await this.insertText(this.getFormattedDate()+"---开始恢复----------"),this.loadingDialogVisible=!0;let o=await u["a"].post("/gw/screenDev/v1/sys/machine/restoreBackup",a,{headers:{"X-Operation-Name":i,"Content-Type":"multipart/form-data"}});200===o.data.code?(await this.$toast.success("恢复plc数据成功"),await this.insertText(this.getFormattedDate()+"---恢复成功"),this.loadingDialogVisible=!1,console.log("plc恢复成功")):(await this.insertText(this.getFormattedDate()+"---恢复失败"),this.loadingDialogVisible=!1)},onTestDataInputFocus(t,e){this.currentType=t,this.trayNum=e,this.showLetterKeyboardDialog=!0},getFormattedDate(){const t=new Date,e=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),a=String(t.getHours()).padStart(2,"0"),o=String(t.getMinutes()).padStart(2,"0"),s=String(t.getSeconds()).padStart(2,"0");return`${e}-${i}-${r} ${a}:${o}:${s}`},async savePlcData(){await(async()=>{const t=encodeURIComponent(this.gridSearch);await this.insertText(this.getFormattedDate()+"---开始备份----------"),this.loadingDialogVisible=!0;let e=await u["a"].get("/gw/screenDev/v1/sys/machine/getBackupPLCData?filePath="+t);200===e.data.code?(console.log("保存数据成功"),await this.insertText(this.getFormattedDate()+"---备份成功，所在路径:"+e.data.result),await this.$toast.success("保存数据成功"),this.loadingDialogVisible=!1):(await this.insertText(this.getFormattedDate()+"---备份失败，失败原因:"+e.data.message),await this.$toast.error(e.data.message),this.loadingDialogVisible=!1)})()}},async created(){let t=await u["a"].get("/gw/screenDev/v1/sys/machine/getTmpFilePath");this.gridSearch=t.data.result}},f=m,b=i("2877"),x=Object(b["a"])(f,r,a,!1,null,null,null);e["default"]=x.exports},"177b":function(t,e,i){},"36cb":function(t,e,i){"use strict";i("177b")},"601f":function(t,e,i){},"69d3":function(t,e,i){"use strict";var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{visible:t.dialogVisible,"custom-class":"device-loading-dialog","show-close":!1,width:"400px","append-to-body":""},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("div",{staticClass:"dialog-content"},[i("div",{staticClass:"loading-animation"},[i("img",{attrs:{src:t.loadingGif,alt:"loading"}})]),i("div",{staticClass:"status-text"},[i("span",{staticClass:"main-text"},[t._v(t._s(t.text.main))]),i("span",{staticClass:"sub-text"},[t._v(t._s(t.text.sub))])]),i("div",{staticClass:"action-buttons"},[i("el-button",{staticClass:"cancel-btn",style:t.buttonStyle,on:{click:t.handleCancel}},[t._v(" "+t._s(t.cancelText)+" ")])],1)])])],1)},a=[],o={name:"device-loading-dialog",props:{visible:Boolean,text:{type:Object,default:()=>({main:"读取中",sub:"读取中...请不要关闭弹窗"})},cancelText:{type:String,default:"取 消"}},data(){return{loadingGif:i("12ae"),buttonStyle:{background:"linear-gradient(180deg, #a8b8ca 0%, #6b7886 100%)",color:"#ffffff",fontSize:"26px",borderRadius:"8px",width:"160px",height:"64px",border:"none"}}},computed:{dialogVisible:{get(){return this.visible},set(t){this.$emit("update:visible",t)}}},methods:{handleCancel(){this.$emit("cancel"),this.dialogVisible=!1}}},s=o,n=(i("36cb"),i("db74"),i("2877")),l=Object(n["a"])(s,r,a,!1,null,"e0e9b01e",null);e["a"]=l.exports},b7ef:function(t,e,i){"use strict";var r=i("23e7"),a=i("cfe9"),o=i("d066"),s=i("5c6c"),n=i("9bf2").f,l=i("1a2d"),c=i("19aa"),d=i("7156"),g=i("e391"),p=i("cf98"),h=i("0d26"),y=i("83ab"),u=i("c430"),w="DOMException",m=o("Error"),f=o(w),b=function(){c(this,x);var t=arguments.length,e=g(t<1?void 0:arguments[0]),i=g(t<2?void 0:arguments[1],"Error"),r=new f(e,i),a=new m(e);return a.name=w,n(r,"stack",s(1,h(a.stack,1))),d(r,this,b),r},x=b.prototype=f.prototype,_="stack"in new m(w),E="stack"in new f(1,2),v=f&&y&&Object.getOwnPropertyDescriptor(a,w),S=!!v&&!(v.writable&&v.configurable),D=_&&!S&&!E;r({global:!0,constructor:!0,forced:u||D},{DOMException:D?b:f});var R=o(w),I=R.prototype;if(I.constructor!==R)for(var k in u||n(I,"constructor",s(1,R)),p)if(l(p,k)){var T=p[k],A=T.s;l(R,A)||n(R,A,s(6,T.c))}},cf98:function(t,e,i){"use strict";t.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},db74:function(t,e,i){"use strict";i("601f")}}]);