(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1e02bce3"],{6548:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("u-linear-layout",{ref:"linear_layout_kt_1",attrs:{gap:"none"}},[r("u-linear-layout",{ref:"linear_layout_kt_10",class:"cw-style-height cw-style-margin-top cw-style-margin",staticStyle:{"--cw-style-height":"auto","--cw-style-margin-top":"12px","margin-top":"12px","--update-key":"1q39",overflow:"auto",height:"100vh"},attrs:{direction:"horizontal",wrap:!0}},[r("u-linear-layout",{ref:"linear_layout_kt_11",class:"cw-style-width",staticStyle:{"--cw-style-width":"100%",width:"100%",height:"auto"},attrs:{direction:"horizontal",wrap:!0}},[r("u-divider",{ref:"divider_1",staticStyle:{"margin-top":"0px"},attrs:{dashed:"a",contentPosition:"center"}},[r("u-text",{ref:"text_965",staticStyle:{"--cw-style-font-size":"20px","--cw-style-color":"#ffffff",color:"#ffffff","font-size":"20px"},attrs:{text:"默认订单 ",display:"inline"}})],1),r("u-grid-layout-row",{ref:"grid_layout_row_2W_3",class:"cw-style-height cw-style-margin-left cw-style-margin cw-style-margin-bottom cw-style-margin-top cw-style-margin-right",staticStyle:{"--cw-style-height":"31vh","--cw-style-margin-left":"0px","--cw-style-margin-bottom":"8px","--cw-style-margin-top":"0px","--cw-style-margin-right":"0px","margin-left":"0px","--update-key":"a2yg","margin-right":"0px","margin-top":"-20px","margin-bottom":"8px",height:"auto"},attrs:{repeat:24}},[r("u-linear-layout",{ref:"linear_layout_kt_12",staticStyle:{"--cw-style-width":"80%",width:"80%"},attrs:{direction:"horizontal",wrap:!0}},[r("div",{staticClass:"container"},[r("el-table",{ref:"tableView",staticStyle:{width:"100%",height:"430px"},attrs:{data:t.filteredData,stripe:!1,"highlight-current-row":!0,"header-cell-style":{textAlign:"center"},"cell-style":{textAlign:"center"}},on:{"row-click":t.handleRowClick}},[r("el-table-column",{staticStyle:{"border-collapse":"collapse",border:"1px solid black"},attrs:{prop:"gridId",label:"指令"},scopedSlots:t._u([{key:"header",fn:function(){return[r("div",[t._v(" 指令 "),r("el-input",{staticStyle:{width:"100%",padding:"0 5px","margin-top":"5px"},attrs:{placeholder:"搜索指令"},on:{input:t.handleSearch,focus:function(e){return t.onTestDataInputFocus("gridSearch",t.gridSearch)}},model:{value:t.gridSearch,callback:function(e){t.gridSearch=e},expression:"gridSearch"}})],1)]},proxy:!0},{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.instructionName))])]}}])}),r("el-table-column",{staticStyle:{"border-collapse":"collapse",border:"1px solid black"},attrs:{prop:"goodsCode",label:"描述"},scopedSlots:t._u([{key:"header",fn:function(){return[r("div",[t._v(" 描述 "),r("el-input",{staticStyle:{width:"100%",padding:"0 5px","margin-top":"5px"},attrs:{placeholder:"搜索描述"},on:{input:t.handleSearch,focus:function(e){return t.onTestDataInputFocus("goodsCodeSearch",t.goodsCodeSearch)}},model:{value:t.goodsCodeSearch,callback:function(e){t.goodsCodeSearch=e},expression:"goodsCodeSearch"}})],1)]},proxy:!0},{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.description))])]}}])}),r("el-table-column",{staticStyle:{"border-collapse":"collapse",border:"1px solid black"},attrs:{prop:"goodsDescr",label:"操作类别"},scopedSlots:t._u([{key:"header",fn:function(){return[r("div",[t._v(" 操作类别 "),r("el-input",{staticStyle:{width:"100%",padding:"0 5px","margin-top":"5px"},attrs:{placeholder:"搜索操作类别"},on:{input:t.handleSearch,focus:function(e){return t.onTestDataInputFocus("goodsDescrSearch",t.goodsDescrSearch)}},model:{value:t.goodsDescrSearch,callback:function(e){t.goodsDescrSearch=e},expression:"goodsDescrSearch"}})],1)]},proxy:!0},{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.instructionType))])]}}])}),r("el-table-column",{staticStyle:{"border-collapse":"collapse",border:"1px solid black"},attrs:{prop:"inventory",label:"行数"},scopedSlots:t._u([{key:"header",fn:function(){return[r("div",[t._v(" 行数 "),r("el-input",{staticStyle:{width:"100%",padding:"0 5px","margin-top":"5px"},attrs:{placeholder:"搜索行数"},on:{input:t.handleSearch,focus:function(e){return t.onTestDataInputFocus("inventorySearch",t.inventorySearch)}},model:{value:t.inventorySearch,callback:function(e){t.inventorySearch=e},expression:"inventorySearch"}})],1)]},proxy:!0},{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.totalRowQuantity))])]}}])})],1)],1)]),r("el-card",{staticClass:"status-card",staticStyle:{width:"19%",background:"#ffffff",padding:"15px"}},[r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:24}},[r("div",{staticClass:"info-item"},[r("span",{staticClass:"label"},[t._v("类别：")]),r("span",{staticClass:"value"},[t._v(t._s(t.category))])])]),r("el-col",{attrs:{span:24}},[r("div",{staticClass:"info-item"},[r("span",{staticClass:"label"},[t._v("指令位置：")]),r("span",{staticClass:"value"},[t._v(t._s(t.instructionPosition))])])]),r("el-col",{attrs:{span:24}},[r("div",{staticClass:"info-item"},[r("span",{staticClass:"label"},[t._v("属性 1：")]),r("span",{staticClass:"value"},[t._v(t._s(t.attribute1))])])]),r("el-col",{attrs:{span:24}},[r("div",{staticClass:"info-item"},[r("span",{staticClass:"label"},[t._v("属性 2：")]),r("span",{staticClass:"value"},[t._v(t._s(t.attribute2))])])]),r("el-col",{attrs:{span:24}},[r("div",{staticClass:"info-item"},[r("span",{staticClass:"label"},[t._v("属性 3：")]),r("span",{staticClass:"value"},[t._v(t._s(t.attribute3))])])])],1)],1)],1),r("u-linear-layout",{ref:"bottom_buttons",class:"cw-style-height cw-style-background-color",staticStyle:{"--cw-style-height":"100px","--cw-style-background-color":"#2c3e50",height:"140px","background-color":"#2c3e50",width:"100%"},attrs:{direction:"horizontal",wrap:!0}},[r("u-grid-layout-row",{ref:"grid_layout_row_2W_3",class:"cw-style-height cw-style-margin-left cw-style-margin cw-style-margin-bottom cw-style-margin-top cw-style-margin-right",staticStyle:{"--cw-style-height":"31vh","--cw-style-margin-left":"0px","--cw-style-margin-bottom":"8px","--cw-style-margin-top":"0px","--cw-style-margin-right":"0px","margin-left":"0px","--update-key":"a2yg","margin-right":"0px","margin-top":"0px","margin-bottom":"8px",height:"50%",width:"100%"},attrs:{repeat:24}},[r("u-text",{ref:"instruction_label",class:"cw-style-height cw-style-color",staticStyle:{"--cw-style-height":"40px","font-size":"24px","margin-left":"10px","--cw-style-color":"#ffffff",width:"120px",height:"64px",color:"#ffffff",display:"flex","align-items":"center","justify-content":"flex-end","padding-right":"10px"},attrs:{text:"指令名称"}}),r("u-linear-layout",{ref:"instruction_input_container",class:"cw-style-height",staticStyle:{"cw-style-height":"40px",height:"64px",width:"350px",border:"2px solid #0078d7","background-color":"#f6f2f2",display:"flex","align-items":"center","justify-content":"center"},attrs:{direction:"horizontal",wrap:!0}},[r("u-input",{ref:"number_input_kt_51111",class:"cw-style-border-style cw-style-border-left-width cw-style-border-width cw-style-border-right-width cw-style-border-top-width cw-style-border-bottom-width cw-style-border-top-left-radius cw-style-border-radius cw-style-border-top-right-radius cw-style-border-bottom-left-radius cw-style-border-bottom-right-radius",staticStyle:{height:"60px",width:"400px","--cw-style-border-style":"solid","--cw-style-border-left-width":"0px","--cw-style-border-right-width":"0px","--cw-style-border-top-width":"0px","--cw-style-border-bottom-width":"0px","--cw-style-border-top-left-radius":"0px","--cw-style-border-top-right-radius":"0px","--cw-style-border-bottom-left-radius":"0px","--cw-style-border-bottom-right-radius":"0px","border-top-left-radius":"0px","border-top-right-radius":"0px","border-bottom-right-radius":"0px","border-bottom-left-radius":"0px","--update-key":"3nnv","border-top-width":"0px","border-left-width":"0px","border-right-width":"0px","border-bottom-width":"0px","border-style":"solid","--number-input-button-padding":"0 0px"},attrs:{value:t.gridSearch,hideButtons:!0,clearable:!0},on:{"update:value":function(e){t.gridSearch=e},focus:function(e){return t.onTestDataInputFocus("gridSearch",t.gridSearch)}}})],1),t.hasPermission("ROW_DEFAULT_ORDER")?r("el-button",{directives:[{name:"longpress",rawName:"v-longpress"}],staticStyle:{width:"25%",height:"64px","margin-left":"8px"},attrs:{type:"primary"},on:{click:function(e){return t.button_2W_38_click(e)}}},[t._v(" 行 ")]):t._e(),r("el-button",{directives:[{name:"longpress",rawName:"v-longpress"}],staticStyle:{width:"25%",height:"64px"},attrs:{type:"primary"},on:{mouseup:function(e){return t.button_creat_order(e)}}},[t._v(" 产生订单 ")])],1),r("u-grid-layout-row",{ref:"grid_layout_row_2W_3",class:"cw-style-height cw-style-margin-left cw-style-margin cw-style-margin-bottom cw-style-margin-top cw-style-margin-right",staticStyle:{"--cw-style-height":"31vh","--cw-style-margin-left":"0px","--cw-style-margin-bottom":"8px","--cw-style-margin-top":"0px","--cw-style-margin-right":"0px","margin-left":"0px","--update-key":"a2yg","margin-right":"0px","margin-top":"-5px","margin-bottom":"8px",height:"10%"},attrs:{repeat:24}},[r("u-text",{ref:"mode_label",class:"cw-style-height cw-style-color",staticStyle:{"--cw-style-height":"40px","--cw-style-color":"#ffffff","margin-left":"10px","font-size":"24px",width:"120px",height:"40px",color:"#ffffff",display:"flex","align-items":"center","justify-content":"flex-end","padding-right":"10px"},attrs:{text:"发送模式"}}),r("u-linear-layout",{ref:"mode_input_container",class:"cw-style-height",staticStyle:{"--cw-style-height":"50px",height:"64px",width:"350px",display:"flex","align-items":"center","justify-content":"center"},attrs:{direction:"horizontal",wrap:!0}},[r("el-select",{staticClass:"custom-select",staticStyle:{height:"64px"},attrs:{placeholder:"请选择发送模式"},model:{value:t.selectedValue,callback:function(e){t.selectedValue=e},expression:"selectedValue"}},t._l(t.options,(function(t){return r("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),r("div",{staticStyle:{"margin-top":"2px",color:"#1a41ee"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.checkedUpper,expression:"checkedUpper"}],staticStyle:{width:"32px",height:"32px","margin-left":"8px",float:"left","margin-top":"5px","accent-color":"#1a41ee"},attrs:{type:"checkbox",id:"upper"},domProps:{checked:Array.isArray(t.checkedUpper)?t._i(t.checkedUpper,null)>-1:t.checkedUpper},on:{change:function(e){var r=t.checkedUpper,a=e.target,i=!!a.checked;if(Array.isArray(r)){var s=null,o=t._i(r,s);a.checked?o<0&&(t.checkedUpper=r.concat([s])):o>-1&&(t.checkedUpper=r.slice(0,o).concat(r.slice(o+1)))}else t.checkedUpper=i}}}),r("label",{staticStyle:{width:"32px",height:"32px","font-size":"24px","margin-left":"10px",color:"white"}},[t._v("暂停执行")])]),r("el-button",{directives:[{name:"longpress",rawName:"v-longpress"}],staticStyle:{width:"25%",height:"64px","margin-left":"128px"},attrs:{type:"primary"},on:{click:t.button_run}},[t._v(" 执行 ")])],1)],1)],1)],1),r("KeyboardDialog",{attrs:{input:t.trayNum},on:{"update:input":function(e){t.trayNum=e}},model:{value:t.showLetterKeyboardDialog,callback:function(e){t.showLetterKeyboardDialog=e},expression:"showLetterKeyboardDialog"}})],1)},i=[],s=(r("f4f9"),r("450d"),r("c2cc")),o=r.n(s),c=(r("7a0f"),r("0f6c")),n=r.n(c),l=(r("b8e0"),r("a4c4")),d=r.n(l),h=(r("14d9"),r("e9f5"),r("d866"),r("910d"),r("f665"),r("7d54"),r("8617")),u=r("65b2"),p=r("2f62");const y={mounted(){document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.onKeyUp)},beforeDestroy(){document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp)},methods:{async onKeyDown(t){},async onKeyUp(t){}}};var g={components:{KeyboardDialog:h["a"],"el-card":d.a,"el-row":n.a,"el-col":o.a},mixins:[y],props:{gridId:{type:Number,default:function(){}}},watch:{trayNum(t){"gridSearch"===this.currentType?this.gridSearch=t:"goodsCodeSearch"===this.currentType?this.goodsCodeSearch=t:"goodsDescrSearch"===this.currentType?this.goodsDescrSearch=t:"inventorySearch"===this.currentType&&(this.inventorySearch=t),this.handleSearch()},gridId:{handler(t){this.$emit("update:gridId",t)}}},data(){return{checkedUpper:!1,selectedRowIndex:null,selectedValue:"",options:[],currentType:"",trayNum:void 0,showLetterKeyboardDialog:!1,data:[],filteredData:[],gridSearch:void 0,goodsCodeSearch:void 0,inventorySearch:void 0,locationSearch:void 0,dataOld:this.$genInitFromSchema("nasl.collection.List<app.structures.TrayPickingByGridDto>",void 0),isClean:!1,goodsDescrSearch:void 0,"private-data-source-cache":new Map,category:"",instructionPosition:"0",attribute1:"",attribute2:"",attribute3:""}},computed:{...Object(p["b"])(["getUserResource","getRouteData"]),userResource(){return this.getUserResource},routeData(){return this.getRouteData}},meta:{title:"默认订单",crumb:void 0,crumbI18n:void 0,first:void 0,auth:void 0},methods:{hasPermission(t){const e=this.routeData,r=e=>{const r=e.find(e=>e.name===t);return r?r.path:null},a=r(e);return console.log(a),console.log(a),this.userResource.includes(a)},async loadData(){try{const t=await u["a"].get("/rest/v2/api/instruction/list",{params:{isDefOrder:!0,equipmentCode:1}});this.data=t.data.result,this.filteredData=this.data}catch(t){throw console.error("请求失败:",t),t}},handleRowClick(t,e,r){this.$refs.tableView.setCurrentRow(t),this.selectedId=t.instructionId,this.selectedName=t.instructionName,this.category="P"===t.instructionType?"出库":"I"===t.instructionType?"盘点":"V"===t.instructionType?"入库":"",this.instructionPosition=t.instructionPosition,this.attribute1=t.attribute1,this.attribute2=t.attribute2,this.attribute3=t.attribute3},async button_run(t){if(null==this.selectedName||""===this.selectedName)return void await this.$toast.warning(this.$utils["ToString"]("nasl.core.String","请选择要执行的指令！"));let e=this.category;if("V"===e)try{await u["a"].post("/rest/instructionIn",{params:{instructionNamaList:this.selectedName,delAllFlag:!0}})}catch(r){throw console.error("请求失败:",r),r}else if("P"===e)try{await u["a"].post("/rest/instructionOut",{params:{instructionNamaList:this.selectedName,delAllFlag:!0}})}catch(r){throw console.error("请求失败:",r),r}else try{await u["a"].post("/rest/instructionStock",{params:{instructionNamaList:this.selectedName,delAllFlag:!0}})}catch(r){throw console.error("请求失败:",r),r}},handleSearch(){this.filteredData=this.data.filter(t=>(!this.gridSearch||t.instructionName.includes(this.gridSearch))&&(!this.goodsCodeSearch||t.description.includes(this.goodsCodeSearch))&&(!this.goodsDescrSearch||t.instructionType.includes(this.goodsDescrSearch))&&(!this.inventorySearch||t.totalRowQuantity.toString()===this.inventorySearch.toString()))},onTestDataInputFocus(t,e){this.currentType=t,this.trayNum=e,this.showLetterKeyboardDialog=!0},async clearSearch(){this.gridSearch=void 0,this.goodsCodeSearch=void 0,this.inventorySearch=void 0,this.locationSearch=void 0,this.goodsDescrSearch=void 0},async showGridByTray_created(t){this.$global.frontendVariables.pageName="1.4.1 |  默认订单",await(async()=>{await(async()=>{const t=document.documentElement;t.style.setProperty("--table-view-head-title-sortable-hover","#0050AB")})(),await this.loadData()})()},async button_2W_38_click(t){await this.$router.push({path:"/dashboard/operateData/rowDefaultOrder",query:{id:this.selectedId,name:this.selectedName}})},async button_creat_order(t){if(null!=this.selectedValue&&""!==this.selectedValue)try{await u["a"].get("/rest/instructionCopy",{params:{copyData:"",instructionNameOld:"",instructionName:"",instructionType:this.selectedValue,reqNum:"",rowIdList:[]}})}catch(e){throw console.error("请求失败:",e),e}else await this.$toast.error(this.$utils["ToString"]("nasl.core.String","请选择发送模式！"))},__isShallowEqualArray(t,e){return t.length===e.length&&t.every((t,r)=>{const a=e[r];return typeof t===typeof a&&("string"===typeof t?t===a:"object"===typeof t&&["item","index","rowIndex","columnIndex","value"].every(e=>t[e]===a[e]))})},__getDataSourceCacheFn(t,e=[]){if(!e.length)return this["private-data-source-cache"].get(t);for(let[r,a]of this["private-data-source-cache"].entries())if(this.__isShallowEqualArray(r,[t,...e]))return a},__setDataSourceCacheFn(t,e=[],r){e.length?this["private-data-source-cache"].set([t,...e],r):this["private-data-source-cache"].set(t,r)},__getOrCreateDataSource(t,e=[],r){let a=this.__getDataSourceCacheFn(t,e);return a||(a=r,this.__setDataSourceCacheFn(t,e,a)),a},onSync_State(t,e,r){this[`${t}_state_${e}`]=r}},async created(){await this.showGridByTray_created();let t=await u["a"].get("/rest/v2/api/dict/list/release_model"),e=t.data.result;e.forEach(t=>{const e={label:t.itemValue+"-"+t.itemText,value:t.itemValue};this.options.push(e)}),console.log(this.options)}},f=g,w=(r("ef53"),r("2877")),m=Object(w["a"])(f,a,i,!1,null,"d10f3ca0",null);e["default"]=m.exports},ef53:function(t,e,r){"use strict";r("f47e")},f47e:function(t,e,r){}}]);