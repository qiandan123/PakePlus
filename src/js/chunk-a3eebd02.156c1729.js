(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a3eebd02"],{"5a5c":function(e,t,o){"use strict";o("b321")},b321:function(e,t,o){},b7ef:function(e,t,o){"use strict";var a=o("23e7"),r=o("cfe9"),i=o("d066"),n=o("5c6c"),s=o("9bf2").f,l=o("1a2d"),c=o("19aa"),d=o("7156"),u=o("e391"),p=o("cf98"),f=o("0d26"),y=o("83ab"),g=o("c430"),m="DOMException",_=i("Error"),h=i(m),w=function(){c(this,x);var e=arguments.length,t=u(e<1?void 0:arguments[0]),o=u(e<2?void 0:arguments[1],"Error"),a=new h(t,o),r=new _(t);return r.name=m,s(a,"stack",n(1,f(r.stack,1))),d(a,this,w),a},x=w.prototype=h.prototype,b="stack"in new _(m),S="stack"in new h(1,2),v=h&&y&&Object.getOwnPropertyDescriptor(r,m),R=!!v&&!(v.writable&&v.configurable),I=b&&!R&&!S;a({global:!0,constructor:!0,forced:g||I},{DOMException:I?w:h});var k=i(m),E=k.prototype;if(E.constructor!==k)for(var z in g||s(E,"constructor",n(1,k)),p)if(l(p,z)){var N=p[z],T=N.s;l(k,T)||s(k,T,n(6,N.c))}},cf98:function(e,t,o){"use strict";e.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},e089:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("u-linear-layout",{ref:"uLinearLayout1",class:"cw-style-height",staticStyle:{"--cw-style-height":"100%",height:"100%","min-height":"768px"},attrs:{type:"root",gap:"none"}},[o("u-linear-layout",{ref:"linear_layout_2W_1",class:"cw-style-height cw-style-margin-left cw-style-margin cw-style-margin-bottom cw-style-margin-top cw-style-margin-right",staticStyle:{"--cw-style-height":"100%","--cw-style-margin-left":"12px","--cw-style-margin-bottom":"8px","--cw-style-margin-top":"8px","--cw-style-margin-right":"12px","margin-top":"8px","--update-key":"jtyo","margin-bottom":"8px","margin-left":"12px","margin-right":"12px",height:"100%"},attrs:{direction:"horizontal",mode:"block"}},[o("u-grid-layout",{ref:"grid_layout_2W_2",class:"cw-style-width",staticStyle:{"--cw-style-width":"100%",width:"100%"}},[o("u-table-view",{directives:[{name:"dependencies",rawName:"v-dependencies.reload",value:[],expression:"[]",modifiers:{reload:!0}}],key:"table_view_2W_1",ref:"table_view_2W_1",class:"cw-style-height cw-style-background-color table_view",staticStyle:{"--cw-style-background-color":"#4e5969","background-color":"#4e5969","--table-view-td-padding":"0px 0px 0px 0px",height:"calc(100vh - 250px)"},attrs:{"show-sizer":!1,pagination:!0,pageSize:e.pageSize,pageNumber:e.pageNumber,"page-size-options":e.pageSizeOptions,valueField:"id",selectable:!0,dataSource:e.roles},on:{"sync:state":function(t,o){return e.onSync_State("table_view_2W_1",t,o)},"click-row":function(t){return e.getSelectedRole(t)},page:e.onPageChange},scopedSlots:e._u([{key:"loading",fn:function(){},proxy:!0},{key:"error",fn:function(){},proxy:!0},{key:"empty",fn:function(){},proxy:!0},{key:"dragGhost",fn:function(e){}}])},[o("u-table-view-column",{key:"table_view_column_2W_2",ref:"table_view_column_2W_2",scopedSlots:e._u([{key:"expander",fn:function(e){return[o("u-table-view-expander",{ref:"table_view_expander_2W_2_"+((e||{}).__nodeKey||(e||{}).index),attrs:{item:(e||{}).item}})]}},{key:"title",fn:function(){return[o("u-text",{ref:"text_2W_2",attrs:{text:"角色"}})]},proxy:!0},{key:"cell",fn:function(t){return[o("u-linear-layout",{ref:"linear_layout_Tz_1_"+((t||{}).__nodeKey||(t||{}).index),class:"cw-style-background-color cw-style-padding-left cw-style-padding cw-style-padding-right",staticStyle:{"--cw-style-padding-left":"6px","--cw-style-padding-right":"10px","--update-key":"ehcj","padding-left":"6px","padding-right":"10px"},attrs:{direction:"horizontal",wrap:!0}},[o("u-text",{ref:"text_2W_4_"+((t||{}).__nodeKey||(t||{}).index),class:"cw-style-font-size",staticStyle:{"--cw-style-font-size":"20px","font-size":"20px"},attrs:{text:e.$utils["ToString"]("nasl.core.Long",((t||{}).item||{}).name),overflow:"break"}})],1)]}},{key:"editcell",fn:function(e){}},{key:"expand-content",fn:function(e){}}])}),o("u-table-view-column",{key:"table_view_column_2W_3",ref:"table_view_column_2W_3",attrs:{width:600},scopedSlots:e._u([{key:"expander",fn:function(e){return[o("u-table-view-expander",{ref:"table_view_expander_2W_3_"+((e||{}).__nodeKey||(e||{}).index),attrs:{item:(e||{}).item}})]}},{key:"title",fn:function(){return[o("u-text",{ref:"text_2W_5",attrs:{text:"描述"}})]},proxy:!0},{key:"cell",fn:function(t){return[o("u-linear-layout",{ref:"linear_layout_Tz_2_"+((t||{}).__nodeKey||(t||{}).index),class:"cw-style-width cw-style-height cw-style-background-color cw-style-padding-left cw-style-padding cw-style-padding-right",staticStyle:{"--cw-style-width":"100%","--cw-style-height":"100%","--cw-style-padding-left":"6px","--cw-style-padding-right":"10px","padding-left":"6px","--update-key":"w6k6","padding-right":"10px",width:"100%",height:"100%","min-height":"43px"},attrs:{direction:"horizontal",wrap:!0}},[o("u-text",{ref:"text_2W_6_"+((t||{}).__nodeKey||(t||{}).index),class:"cw-style-font-size",staticStyle:{"--cw-style-font-size":"20px","font-size":"20px"},attrs:{text:e.$utils["ToString"]("nasl.core.String",t.item.description),overflow:"break"}})],1)]}},{key:"editcell",fn:function(e){}},{key:"expand-content",fn:function(e){}}])})],1),o("u-linear-layout",{ref:"linear_layout_bt1",class:"cw-style-height cw-style-margin-bottom cw-style-margin",staticStyle:{"--cw-style-height":"64px","--cw-style-margin-bottom":"8px",height:"64px","margin-bottom":"8px","--update-key":"e5w0"},attrs:{wrap:!0,mode:"flex",direction:"horizontal",justify:"center",alignment:"center"}},[o("div",{staticClass:"pallet-inventory"},[o("div",{staticClass:"content-box"},[o("router-view")],1),o("div",{staticClass:"bottom-btn"},[o("el-button",{directives:[{name:"longpress",rawName:"v-longpress"}],attrs:{type:"primary"},on:{click:function(t){return e.addNewRole()}}},[e._v(" 新建 ")]),o("el-button",{directives:[{name:"longpress",rawName:"v-longpress"}],attrs:{type:"warning"},on:{click:function(t){return e.modifyRole()}}},[e._v("修改")]),o("el-button",{directives:[{name:"longpress",rawName:"v-longpress"}],attrs:{type:"success"},on:{click:function(t){return e.deleteRole()}}},[e._v(" 删除 ")])],1)])])],1)],1),o("u-modal",{ref:"modal_Manual",class:"cw-style-width cw-style-height cw-style-text-align",staticStyle:{"--cw-style-width":"800px","--cw-style-height":"500px","--cw-style-text-align":"center","--modal-dialog-background-color":"#4e5969","--modal-body-margin":"0","--modal-close-right":"12px","--modal-foot-padding":"0px 0px","--modal-dialog-width":"400px","--modal-close-color":"#ffffff","--modal-border-color":"#4e5969",width:"800px","text-align":"center",height:"500px","--custom-start":"auto","dialog-height":"1000px"},attrs:{size:"auto"},scopedSlots:e._u([{key:"foot",fn:function(){return[o("u-linear-layout",{ref:"linear_layout_47",class:"cw-style-margin-bottom cw-style-margin cw-style-margin-top",staticStyle:{"--cw-style-margin-bottom":"10px","--cw-style-margin-top":"40px","margin-top":"40px","--update-key":"qqgf","margin-bottom":"10px"},attrs:{direction:"horizontal",wrap:!0}},[o("u-button",{ref:"button_14",attrs:{color:"primary",text:"下一步",size:"large"},on:{click:function(t){return e.nextStep(t,e.roleInfo)}}})],1)]},proxy:!0},{key:"body",fn:function(){return[o("u-linear-layout",{ref:"linear_layout_44",class:"cw-style-text-align cw-style-padding-left cw-style-padding cw-style-padding-right cw-style-margin-top cw-style-margin",staticStyle:{"--cw-style-text-align":"left","--cw-style-padding-left":"40px","--cw-style-padding-right":"40px","--cw-style-margin-top":"20px","text-align":"left","padding-right":"40px","--update-key":"3t34","padding-left":"40px","margin-top":"20px"},attrs:{justify:"auto",wrap:!0}},[o("u-linear-layout",{ref:"linear_layout_45",attrs:{wrap:!0}},[o("u-form",{key:"form_2",ref:"form_2",attrs:{labelLayout:"inline"}},[o("u-form-item",{ref:"form_item_4",class:"cw-style-font-size cw-style-color",staticStyle:{"--cw-style-font-size":"25px","--cw-style-color":"#ffffff","font-size":"25px",color:"#ffffff"},attrs:{required:!0,rules:[{validate:"filled",message:"角色名不得为空",trigger:"input+blur",required:!0}],layout:"center",labelSize:"normal",fieldSize:"normal"},scopedSlots:e._u([{key:"label",fn:function(){return[o("u-text",{ref:"text_79",class:"cw-style-font-size cw-style-color",staticStyle:{"--cw-style-font-size":"25px","--cw-style-color":"#fffefe",color:"#fffefe","font-size":"25px"},attrs:{text:"名称"}})]},proxy:!0}])},[o("u-input",{ref:"input_2",attrs:{placeholder:"请输入角色名称"},on:{focus:function(t){return e.onNumberInputFocus("name",e.roleInfo.name)}},model:{value:e.roleInfo.name,callback:function(t){e.$set(e.roleInfo,"name",t)},expression:"roleInfo.name"}})],1),o("u-form-item",{ref:"form_item_7",class:"cw-style-font-size cw-style-color",staticStyle:{"--cw-style-font-size":"25px","--cw-style-color":"#ffffff","font-size":"25px",color:"#ffffff"},attrs:{required:!0,rules:[{validate:"filled",message:"角色描述不得为空",trigger:"input+blur",required:!0}],layout:"center"},scopedSlots:e._u([{key:"label",fn:function(){return[o("u-text",{ref:"text_83",class:"cw-style-color",staticStyle:{"--cw-style-color":"#fffefe",color:"#fffefe"},attrs:{text:"描述"}})]},proxy:!0}])},[o("u-input",{ref:"input_3",attrs:{placeholder:"请输入角色描述"},on:{focus:function(t){return e.onNumberInputFocus("description",e.roleInfo.description)}},model:{value:e.roleInfo.description,callback:function(t){e.$set(e.roleInfo,"description",t)},expression:"roleInfo.description"}})],1)],1)],1)],1)]},proxy:!0},{key:"title",fn:function(){return[o("u-text",{ref:"text_62",class:"cw-style-font-size cw-style-color",staticStyle:{"--cw-style-font-size":"22px","--cw-style-color":"#ffffff",color:"#ffffff","font-size":"22px"},attrs:{text:e.isupdate?"新建角色":"修改角色"}})]},proxy:!0}])}),o("u-modal",{ref:"modal_5",class:"cw-style-width cw-style-height cw-style-text-align",staticStyle:{"--cw-style-width":"800px","--cw-style-height":"500px","--cw-style-text-align":"center","--modal-dialog-background-color":"#4e5969","--modal-body-margin":"0","--modal-close-right":"12px","--modal-foot-padding":"0px 0px","--modal-dialog-width":"400px","--modal-close-color":"#ffffff","--modal-border-color":"#4e5969",width:"800px","text-align":"center",height:"500px","--custom-start":"auto","dialog-height":"1000px"},attrs:{size:"huge"},scopedSlots:e._u([{key:"foot",fn:function(){return[o("u-linear-layout",{ref:"linear_layout_49",class:"cw-style-margin-bottom cw-style-margin cw-style-margin-top",staticStyle:{"--cw-style-margin-bottom":"10px","--cw-style-margin-top":"30px","margin-top":"30px","--update-key":"szdy","margin-bottom":"10px"},attrs:{direction:"horizontal",wrap:!0}},[o("u-button",{ref:"button_17",attrs:{color:"primary",text:"确定",size:"large"},on:{mouseup:function(t){return e.closeRole()}}})],1)]},proxy:!0},{key:"body",fn:function(){return[o("u-grid-layout",{ref:"grid_layout_20"},[o("u-grid-layout-row",{ref:"grid_layout_row_20",class:"cw-style-text-align",staticStyle:{"--cw-style-text-align":"center","text-align":"center"},attrs:{repeat:24,justify:"center",alignment:"center"}},[o("u-grid-layout-column",{ref:"grid_layout_column_47",attrs:{span:10,wrap:!0}},[o("u-table-view",{key:"table_view_2",ref:"table_view_2",class:"cw-style-text-align",staticStyle:{"--cw-style-text-align":"center","text-align":"center"},attrs:{dataSource:e.mappedRoleList,dataSchema:"LoadUserInfoTableView_1Structure",valueField:"entity1.id",pagination:!0,showSizer:!1,pageSize:20,pageNumber:1,selectable:!0},on:{"sync:state":function(t,o){return e.onSync_State("table_view_2",t,o)},"click-row":function(t){return e.getRoleInfo(t)}},scopedSlots:e._u([{key:"loading",fn:function(){},proxy:!0},{key:"error",fn:function(){},proxy:!0},{key:"empty",fn:function(){},proxy:!0},{key:"dragGhost",fn:function(e){}}])},[o("u-table-view-column",{key:"table_view_column_4",ref:"table_view_column_4",staticStyle:{"--table-view-th-text-align":"center"},attrs:{field:"entity1.roleName"},scopedSlots:e._u([{key:"expander",fn:function(e){return[o("u-table-view-expander",{ref:"table_view_expander_4_"+((e||{}).__nodeKey||(e||{}).index),attrs:{item:(e||{}).item}})]}},{key:"cell",fn:function(t){return[o("u-linear-layout",{ref:"linear_layout_54_"+((t||{}).__nodeKey||(t||{}).index),style:{"background-color":e.genviewMatchExpression_0e418g50(t),"--cw-style-background-color":e.genviewMatchExpression_0e418g50(t)},attrs:{gap:"small"}},[o("u-text",{ref:"text_100_"+((t||{}).__nodeKey||(t||{}).index),attrs:{text:e.$utils["ToString"]("nasl.core.String",((t||{}).item||{}).name)}})],1)]}},{key:"title",fn:function(){return[o("u-text",{ref:"text_99",attrs:{text:"已绑定"}})]},proxy:!0},{key:"editcell",fn:function(e){}},{key:"expand-content",fn:function(e){}}])})],1)],1),o("u-grid-layout-column",{ref:"grid_layout_column_48",class:"cw-style-height",staticStyle:{"--cw-style-height":"50px",height:"50px"},attrs:{span:2,mode:"inline"}},[o("u-linear-layout",{ref:"linear_layout_58",attrs:{direction:"vertical",wrap:!0}},[o("u-linear-layout",{ref:"linear_layout_59",staticStyle:{cursor:"pointer"},attrs:{wrap:!0},on:{mouseup:function(t){return e.unBindRole()}}},[o("i-ico",{ref:"ico_19",class:"cw-style-font-size",staticStyle:{"--cw-style-font-size":"24px","font-size":"24px"},attrs:{name:"d-right-arrow",icotype:"only"}},[o("u-text",{ref:"text_111",attrs:{text:"图标"}})],1)],1),o("u-linear-layout",{ref:"linear_layout_60",class:"cw-style-font-size",staticStyle:{"--cw-style-font-size":"20px","font-size":"20px",cursor:"pointer"},attrs:{wrap:!0},on:{mouseup:function(t){return e.bindRole()}}},[o("i-ico",{ref:"ico_21",class:"cw-style-font-size",staticStyle:{"--cw-style-font-size":"24px","font-size":"24px"},attrs:{name:"d-left-arrow",icotype:"only"}},[o("u-text",{ref:"text_113",attrs:{text:"图标"}})],1)],1)],1)],1),o("u-grid-layout-column",{ref:"grid_layout_column_49",class:"cw-style-text-align",staticStyle:{"--cw-style-text-align":"right","text-align":"right"},attrs:{span:10,wrap:!0}},[o("u-table-view",{key:"table_view_3",ref:"table_view_3",class:"cw-style-text-align",staticStyle:{"--cw-style-text-align":"center","text-align":"center"},attrs:{dataSource:e.notMappedRoleList,dataSchema:"LoadUserInfoTableView_1Structure",valueField:"roleInfo.id",pagination:!0,showSizer:!1,pageSize:20,pageNumber:1,selectable:!0},on:{"sync:state":function(t,o){return e.onSync_State("table_view_3",t,o)},"click-row":function(t){return e.getRoleInfo(t)}},scopedSlots:e._u([{key:"loading",fn:function(){},proxy:!0},{key:"error",fn:function(){},proxy:!0},{key:"empty",fn:function(){},proxy:!0},{key:"dragGhost",fn:function(e){}}])},[o("u-table-view-column",{key:"table_view_column_5",ref:"table_view_column_5",staticStyle:{"--table-view-th-text-align":"center"},attrs:{field:"entity1.roleName"},scopedSlots:e._u([{key:"expander",fn:function(e){return[o("u-table-view-expander",{ref:"table_view_expander_5_"+((e||{}).__nodeKey||(e||{}).index),attrs:{item:(e||{}).item}})]}},{key:"cell",fn:function(t){return[o("u-linear-layout",{ref:"linear_layout_55_"+((t||{}).__nodeKey||(t||{}).index),style:{"background-color":e.genviewMatchExpression_0e418g50(t),"--cw-style-background-color":e.genviewMatchExpression_0e418g50(t)},attrs:{gap:"small"}},[o("u-text",{ref:"text_102_"+((t||{}).__nodeKey||(t||{}).index),attrs:{text:e.$utils["ToString"]("nasl.core.String",((t||{}).item||{}).name)}})],1)]}},{key:"title",fn:function(){return[o("u-text",{ref:"text_101",attrs:{text:"权限"}})]},proxy:!0},{key:"editcell",fn:function(e){}},{key:"expand-content",fn:function(e){}}])})],1)],1)],1)],1)]},proxy:!0},{key:"title",fn:function(){return[o("u-text",{ref:"text_89",class:"cw-style-font-size cw-style-color",staticStyle:{"--cw-style-font-size":"22px","--cw-style-color":"#ffffff",color:"#ffffff","font-size":"22px"},attrs:{text:"绑定权限"}})]},proxy:!0}])}),o("KeyboardDialog",{attrs:{input:e.trayNum},on:{"update:input":function(t){e.trayNum=t}},model:{value:e.showKeyboardDialog,callback:function(t){e.showKeyboardDialog=t},expression:"showKeyboardDialog"}})],1)},r=[],i=(o("9e1f"),o("450d"),o("6ed5")),n=o.n(i),s=(o("e9f5"),o("d866"),o("ab43"),o("b7ef"),o("8617")),l=o("65b2");let c=void 0;var d={mixins:[],data(){return{selectedRole:{},confirmPassword:"",newPassword:"",user:{},roleInfo:{id:void 0,name:"",description:""},isupdate:void 0,testData:"abc",tableScrollTop:0,pageSize:5,pageNumber:1,showLetterKeyboardDialog:!1,trayDtoList:this.$genInitFromSchema("nasl.collection.List<app.structures.TrayDto>",void 0),timerBool:!0,selectedTray:void 0,trayCodeList:this.$genInitFromSchema("nasl.collection.List<nasl.core.Long>",void 0),pageint:void 0,selectTray:this.$genInitFromSchema("app.structures.TrayDto",void 0),state1:void 0,state2:void 0,btnBool:!1,getBtnBool:!0,table_view_2W_1_state_page:void 0,"private-data-source-cache":new Map,roles:[],mappedRoleList:[],notMappedRoleList:[],selectedPermissionId:"",showKeyboardDialog:!1,trayNum:"",currentType:""}},computed:{pageSizeOptions(){return[this.pageSize]}},components:{KeyboardDialog:s["a"]},watch:{trayNum(e){"name"===this.currentType?this.roleInfo.name=e:"description"===this.currentType&&(this.roleInfo.description=e)}},meta:{title:"本机用户",crumb:void 0,crumbI18n:void 0,first:void 0,auth:void 0},mounted(){this.setPageSize(),window.addEventListener("resize",()=>{this.setPageSize()})},beforeDestroy(){clearInterval(c),c=void 0},methods:{async getSelectedRole(e){this.selectedRole=e.item},onNumberInputFocus(e,t){this.currentType=e,this.trayNum=null!=t?t:"",this.showKeyboardDialog=!0},async bindRole(){let e={roleId:this.roleInfo.id,permissionId:this.permissionInfo.id};const t="角色 - 绑定角色",o=btoa(unescape(encodeURIComponent(t)));let a=await l["a"].post("/gw/screenDev/v1/permission/saveRolePermissionMap",e,{headers:{"X-Operation-Name":o,Authorization:"Bearer "+localStorage.getItem("token")||!1}});200===a.data.code?(await this.getMappedOrNotPermission("mapped"),await this.getMappedOrNotPermission("notMapped")):this.$toast.error(this.$utils["ToString"]("nasl.core.String",a.data.message))},async unBindRole(){console.log(this.roleInfo);let e={roleId:this.roleInfo.id,permissionId:this.permissionInfo.id};const t="角色 - 解除绑定",o=btoa(unescape(encodeURIComponent(t)));let a=await l["a"].post("/gw/screenDev/v1/permission/removeRolePermissionMap",e,{headers:{"X-Operation-Name":o,Authorization:"Bearer "+localStorage.getItem("token")||!1}});200===a.data.code?(console.log("2222"),await this.getMappedOrNotPermission("mapped"),await this.getMappedOrNotPermission("notMapped")):this.$toast.error(this.$utils["ToString"]("nasl.core.String",a.data.message))},async closeRole(){await(async()=>{await(this.$refs&&this.$refs["modal_5"]&&this.$refs["modal_5"].close&&this.$refs["modal_5"].close()),this.selectedPermissionId=void 0,await this.getRoles()})()},genviewMatchExpression_0e418g50(e){return(()=>{if(this.$global.isEqual(this.selectedPermissionId,e.item.id))return"#0177fd"})()},async getRoleInfo(e){this.selectedPermissionId=(e||{}).item.id,this.permissionInfo=e.item,console.log(this.permissionInfo)},async saveOrupdateUserInfo(e){let t=!0;if(this.isupdate){const o="角色 - 新增/修改角色",a=btoa(unescape(encodeURIComponent(o)));await l["a"].post("/gw/screenDev/v1/permission/addRole",e,{headers:{"X-Operation-Name":a}}).then(e=>{console.log(e),200===(e||{}).data.code?(this.roleInfo=(e||{}).data.result,console.log("新增成功")):(this.$toast.error(this.$utils["ToString"]("nasl.core.String",e.data.message)),t=!1)})}else await l["a"].post("/gw/screenDev/v1/permission/updateRole",e,{headers:{"X-Operation-Name":encodedName}}).then(e=>{200===(e||{}).data.code?(this.roleInfo=(e||{}).data.result,console.log("更新成功")):(this.$toast.error(this.$utils["ToString"]("nasl.core.String",e.data.message)),t=!1)});return t},async getMappedOrNotPermission(e){console.log(this.roleInfo),await l["a"].get("/gw/screenDev/v1/permission/getMappedPermission?type="+e+"&roleId="+this.roleInfo.id,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(t=>{200===(t||{}).data.code&&("mapped"===e?this.mappedRoleList=(t||{}).data.result:this.notMappedRoleList=(t||{}).data.result)})},async nextStep(e,t){await(async()=>{if(null===this.roleInfo.name||""===this.roleInfo.name)return void this.$toast.warning(this.$utils["ToString"]("nasl.core.String","角色名不能为空"));if(null===this.roleInfo.description||""===this.roleInfo.description)return void this.$toast.warning(this.$utils["ToString"]("nasl.core.String","角色描述不能为空"));const e=this.roles.map(e=>e.name);if(this.isupdate&&e.includes(this.roleInfo.name))return void this.$toast.warning(this.$utils["ToString"]("nasl.core.String","角色已存在，请重新填写"));let o=await this.saveOrupdateUserInfo(t);o&&(await(this.$refs&&this.$refs["modal_Manual"]&&this.$refs["modal_Manual"].close&&this.$refs["modal_Manual"].close()),await this.getMappedOrNotPermission("mapped"),await this.getMappedOrNotPermission("notMapped"),await(this.$refs&&this.$refs["modal_5"]&&this.$refs["modal_5"].open&&this.$refs["modal_5"].open()))})()},async deleteRole(){0!==Object.keys(this.selectedRole).length?n.a.confirm("确定删除该角色吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const e="角色 - 删除",t=btoa(unescape(encodeURIComponent(e)));l["a"].post("/gw/screenDev/v1/permission/deleteRole",this.selectedRole,{headers:{"X-Operation-Name":t}}).then(e=>{200===e.data.code?(this.getRoles(),this.$toast.success(this.$utils["ToString"]("nasl.core.String","删除成功"))):this.$toast.error(this.$utils["ToString"]("nasl.core.String",e.data.message))})}).catch(()=>{this.$toast.info(this.$utils["ToString"]("nasl.core.String","取消删除"))}):this.$toast.warning(this.$utils["ToString"]("nasl.core.String","请选择要删除的角色"))},async modifyRole(){await(async()=>{if(0===Object.keys(this.selectedRole).length)return void this.$toast.warning(this.$utils["ToString"]("nasl.core.String","请选择要修改的角色"));this.isupdate=!1;let e=await l["a"].get("/gw/screenDev/v1/permission/getRoleById?id="+this.selectedRole.id);200===e.data.code&&(this.roleInfo=e.data.result),await(this.$refs&&this.$refs["modal_Manual"]&&this.$refs["modal_Manual"].open&&this.$refs["modal_Manual"].open())})()},async clearObjectValues(e){for(let t in e)e.hasOwnProperty(t)&&(e[t]="password"===t?"123456":null)},async addNewRole(){await(async()=>{this.isupdate=!0,await this.clearObjectValues(this.roleInfo),console.log(this.roleInfo),await(this.$refs&&this.$refs["modal_Manual"]&&this.$refs["modal_Manual"].open&&this.$refs["modal_Manual"].open())})()},setPageSize(){const e=window.innerHeight,t=e-300;this.pageSize=Math.floor(t/43)},async getRoles(){let e=await l["a"].get("/gw/screenDev/v1/permission/getRoleList");200===e.data.code&&(this.roles=e.data.result)},async roles_created(e){await(async()=>{await this.getRoles()})();let t=window.localStorage.getItem("testMode");"true"==t&&(this.getBtnBool=!1)},async roles_destroyed(e){await(async()=>{})()},onPageChange(e){const{size:t,number:o}=e;this.pageSize=t,this.pageNumber=o},__isShallowEqualArray(e,t){return e.length===t.length&&e.every((e,o)=>{const a=t[o];return typeof e===typeof a&&("string"===typeof e?e===a:"object"===typeof e&&["item","index","rowIndex","columnIndex","value"].every(t=>e[t]===a[t]))})},__getDataSourceCacheFn(e,t=[]){if(!t.length)return this["private-data-source-cache"].get(e);for(let[o,a]of this["private-data-source-cache"].entries())if(this.__isShallowEqualArray(o,[e,...t]))return a},__setDataSourceCacheFn(e,t=[],o){t.length?this["private-data-source-cache"].set([e,...t],o):this["private-data-source-cache"].set(e,o)},__getOrCreateDataSource(e,t=[],o){let a=this.__getDataSourceCacheFn(e,t);return a||(a=o,this.__setDataSourceCacheFn(e,t,a)),a},onSync_State(e,t,o){this[`${e}_state_${t}`]=o}},async created(){await this.roles_created()},async destroyed(){await this.roles_destroyed()}},u=d,p=(o("5a5c"),o("2877")),f=Object(p["a"])(u,a,r,!1,null,null,null);t["default"]=f.exports}}]);