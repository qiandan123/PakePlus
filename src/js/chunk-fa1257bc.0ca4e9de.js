(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fa1257bc"],{"3a6e":function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"table-wrap"},[o("KeyboardDialog",{attrs:{input:t.trayNum},on:{"update:input":function(e){t.trayNum=e}},model:{value:t.showLetterKeyboardDialog,callback:function(e){t.showLetterKeyboardDialog=e},expression:"showLetterKeyboardDialog"}}),o("div",{staticClass:"pallet-inventory"},[o("div",{staticClass:"content-box"},[o("el-table",{ref:"tableRef",attrs:{"row-key":"id",height:"100%",border:"",data:t.tableData,"highlight-current-row":""},on:{"row-click":t.onRowClick}},[o("el-table-column",{attrs:{prop:"goodsCode",label:"货物"},scopedSlots:t._u([{key:"header",fn:function(){return[o("div",[o("div",{staticClass:"form-label"},[t._v("货物")]),o("el-input",{attrs:{size:"small",placeholder:"请输入"},on:{focus:function(e){return t.onTestDataInputFocus("goodsCode",t.goodsCode)}},model:{value:t.goodsCode,callback:function(e){t.goodsCode=e},expression:"goodsCode"}})],1)]},proxy:!0}])}),o("el-table-column",{attrs:{prop:"description",label:"描述"},scopedSlots:t._u([{key:"header",fn:function(){return[o("div",[o("div",{staticClass:"form-label"},[t._v("描述")]),o("el-input",{attrs:{size:"small",placeholder:"请输入"},on:{focus:function(e){return t.onTestDataInputFocus("description",t.description)}},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1)]},proxy:!0}])}),o("el-table-column",{attrs:{prop:"sub1",label:"sub1"},scopedSlots:t._u([{key:"header",fn:function(){return[o("div",[o("div",{staticClass:"form-label"},[t._v("Sub1")]),o("el-input",{attrs:{size:"small",placeholder:"请输入"},on:{focus:function(e){return t.onTestDataInputFocus("sub1",t.sub1)}},model:{value:t.sub1,callback:function(e){t.sub1=e},expression:"sub1"}})],1)]},proxy:!0}])}),o("el-table-column",{attrs:{prop:"sub2",label:"sub2"},scopedSlots:t._u([{key:"header",fn:function(){return[o("div",[o("div",{staticClass:"form-label"},[t._v("Sub2")]),o("el-input",{attrs:{size:"small",placeholder:"请输入"},on:{focus:function(e){return t.onTestDataInputFocus("sub2",t.sub2)}},model:{value:t.sub2,callback:function(e){t.sub2=e},expression:"sub2"}})],1)]},proxy:!0}])}),o("el-table-column",{attrs:{prop:"inventory",label:"数量"},scopedSlots:t._u([{key:"header",fn:function(){return[o("div",[o("div",{staticClass:"form-label"},[t._v("数量")]),o("el-input",{attrs:{size:"small",placeholder:"请输入"},on:{focus:function(e){return t.onTestDataInputFocus("inventory",t.inventory)}},model:{value:t.inventory,callback:function(e){t.inventory=e},expression:"inventory"}})],1)]},proxy:!0}])}),o("el-table-column",{attrs:{prop:"pickingDestination",label:"目的地",width:"220"},scopedSlots:t._u([{key:"header",fn:function(){return[o("div",[o("div",{staticClass:"form-label"},[t._v("目的地")]),o("el-input",{attrs:{size:"small",placeholder:"请输入"},on:{focus:function(e){return t.onTestDataInputFocus("pickingDestination",t.pickingDestination)}},model:{value:t.pickingDestination,callback:function(e){t.pickingDestination=e},expression:"pickingDestination"}})],1)]},proxy:!0}])}),o("el-table-column",{attrs:{prop:"firstInventory",label:"日期/时间",width:"220",formatter:t.formatBeijingTime},scopedSlots:t._u([{key:"header",fn:function(){return[o("div",[o("div",{staticClass:"form-label"},[t._v("日期/时间")]),o("el-date-picker",{attrs:{placeholder:"请选择到期日期"},on:{change:function(e){return t.applyFilters()}},model:{value:t.firstInventory,callback:function(e){t.firstInventory=e},expression:"firstInventory"}})],1)]},proxy:!0}])}),o("el-table-column",{attrs:{prop:"borrowedUser",label:"用户",width:"220"},scopedSlots:t._u([{key:"header",fn:function(){return[o("div",[o("div",{staticClass:"form-label"},[t._v("用户")]),o("el-input",{attrs:{size:"small",placeholder:"请输入"},on:{focus:function(e){return t.onTestDataInputFocus("borrowedUser",t.borrowedUser)}},model:{value:t.borrowedUser,callback:function(e){t.borrowedUser=e},expression:"borrowedUser"}})],1)]},proxy:!0}])})],1)],1),o("div",{staticClass:"bottom-btn"},[t.hasPermission("LIST_OF_BORROWED_RETURN")?o("el-button",{directives:[{name:"longpress",rawName:"v-longpress"}],attrs:{type:"success",disabled:!t.selectRow},on:{click:function(e){return t.onBorrowReturn("notReturn")}}},[t._v(" 无须归还 ")]):t._e(),t.hasPermission("LIST_OF_BORROWED_RETURN")?o("el-button",{directives:[{name:"longpress",rawName:"v-longpress"}],attrs:{type:"success",disabled:!t.selectRow},on:{click:function(e){return t.onBorrowReturn("return")}}},[t._v(" 归还 ")]):t._e()],1)])],1)},r=[],i=(o("14d9"),o("e9f5"),o("910d"),o("f665"),o("8617")),n=o("2f62"),a=o("65b2"),l={components:{KeyboardDialog:i["a"]},name:"table",data(){return{selectRow:null,tableRef:null,form:{},currentType:"",tableData:[],goodsCode:null,description:null,sub1:null,sub2:null,pickingDestination:null,firstInventory:null,inventory:null,gridSearch:void 0,borrowedUser:void 0,trayNum:"",showLetterKeyboardDialog:!1,originalTableData:[]}},computed:{...Object(n["b"])(["getUserResource","getRouteData"]),userResource(){return this.getUserResource},routeData(){return this.getRouteData},trayNum(t){"goodsCode"===this.currentType?this.goodsCode=t:"description"===this.currentType?this.description=t:"sub1"===this.currentType?this.sub1=t:"sub2"===this.currentType?this.sub2=t:"inventory"===this.currentType?this.inventory=t:"pickingDestination"===this.currentType?this.pickingDestination=t:"firstInventory"===this.currentType?this.firstInventory=t:"borrowedUser"===this.currentType&&(this.borrowedUser=t)},goodsCode(){this.applyFilters()},description(){this.applyFilters()},sub1(){this.applyFilters()},sub2(){this.applyFilters()},inventory(){this.applyFilters()},pickingDestination(){this.applyFilters()},firstInventory(){this.applyFilters()},borrowedUser(){this.applyFilters()}},mounted(){this.initData()},watch:{trayNum(t){"goodsCode"===this.currentType?this.goodsCode=t:"description"===this.currentType?this.description=t:"sub1"===this.currentType?this.sub1=t:"sub2"===this.currentType?this.sub2=t:"inventory"===this.currentType?this.inventory=t:"pickingDestination"===this.currentType?this.pickingDestination=t:"firstInventory"===this.currentType?this.firstInventory=t:"borrowedUser"===this.currentType&&(this.borrowedUser=t)},goodsCode(){this.applyFilters()},description(){this.applyFilters()},sub1(){this.applyFilters()},sub2(){this.applyFilters()},inventory(){this.applyFilters()},pickingDestination(){this.applyFilters()},firstInventory(){this.applyFilters()},borrowedUser(){this.applyFilters()}},methods:{hasPermission(t){const e=this.routeData,o=e=>{const o=e.find(e=>e.name===t);return o?o.path:null},s=o(e);return console.log(s),console.log(s),this.userResource.includes(s)},async initData(){await a["a"].get("/rest/getAllBorrowed").then(t=>{console.log(t,"getBorrowed"),console.log(t.data.data,"getBorrowed"),200===t.data.code?(this.originalTableData=t.data.data,this.tableData=t.data.data,this.applyFilters()):this.$toast.error(this.$utils["ToString"]("nasl.core.String",t.data.message))})},onRowClick(t){var e;console.log(t),null===(e=this.$refs["tableRef"])||void 0===e||e.setCurrentRow(t),this.selectRow=t},onBorrowReturn(t){console.log(this.selectRow);var e={...this.selectRow,type:t};this.$router.push({path:"/dashboard/borrowedTool/borrowReturn",query:e})},onTestDataInputFocus(t,e){console.log(e),null==e&&(e=""),this.currentType=t,this.trayNum=e,null==e&&(e=""),this.showLetterKeyboardDialog=!0},formatBeijingTime(t,e,o){if(!o)return"";const s=new Date(o),r=new Date(s.getTime()+288e5),i=r.getFullYear(),n=String(r.getMonth()+1).padStart(2,"0"),a=String(r.getDate()).padStart(2,"0");return`${i}-${n}-${a}`},applyFilters(){let t=this.originalTableData;if(this.goodsCode&&(t=t.filter(t=>t.goodsCode&&t.goodsCode.toLowerCase().includes(this.goodsCode.toLowerCase()))),this.description&&(t=t.filter(t=>t.description&&t.description.toLowerCase().includes(this.description.toLowerCase()))),this.sub1&&(t=t.filter(t=>t.sub1&&t.sub1.toLowerCase().includes(this.sub1.toLowerCase()))),this.sub2&&(t=t.filter(t=>t.sub2&&t.sub2.toLowerCase().includes(this.sub2.toLowerCase()))),this.inventory&&(t=t.filter(t=>t.inventory&&String(t.inventory).toLowerCase().includes(this.inventory.toLowerCase()))),this.pickingDestination&&(t=t.filter(t=>t.pickingDestination&&t.pickingDestination.toLowerCase().includes(this.pickingDestination.toLowerCase()))),this.firstInventory){const e=this.formatBeijingTime({},{},this.firstInventory);t=t.filter(t=>t.firstInventory&&this.formatBeijingTime({},{},t.firstInventory)===e)}this.borrowedUser&&(t=t.filter(t=>t.borrowedUser&&t.borrowedUser.toLowerCase().includes(this.borrowedUser.toLowerCase()))),this.tableData=t}}},u=l,c=(o("e592"),o("2877")),d=Object(c["a"])(u,s,r,!1,null,"0a406b4d",null);e["default"]=d.exports},4014:function(t,e,o){},e592:function(t,e,o){"use strict";o("4014")}}]);