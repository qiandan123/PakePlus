(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1aad56b2"],{"05b4":function(e,t,s){"use strict";s.r(t);var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("u-linear-layout",{ref:"uLinearLayout1",class:"cw-style-height",staticStyle:{"--cw-style-height":"100%",height:"100%","min-height":"768px"},attrs:{type:"root",gap:"none"}},[s("u-linear-layout",{ref:"linear_layout_2W_1",class:"cw-style-height cw-style-margin-left cw-style-margin cw-style-margin-bottom cw-style-margin-top cw-style-margin-right",staticStyle:{"--cw-style-height":"100%","--cw-style-margin-left":"12px","--cw-style-margin-bottom":"8px","--cw-style-margin-top":"8px","--cw-style-margin-right":"12px","margin-top":"8px","--update-key":"jtyo","margin-bottom":"8px","margin-left":"12px","margin-right":"12px",height:"100%"},attrs:{direction:"horizontal",mode:"block"}},[s("u-grid-layout",{ref:"grid_layout_2W_2",class:"cw-style-width",staticStyle:{"--cw-style-width":"100%",width:"100%"}},[s("u-table-view",{directives:[{name:"dependencies",rawName:"v-dependencies.reload",value:[],expression:"[]",modifiers:{reload:!0}}],key:"table_view_2W_1",ref:"table_view_2W_1",class:"cw-style-height cw-style-background-color table_view",staticStyle:{"--cw-style-background-color":"#4e5969","background-color":"#4e5969","--table-view-td-padding":"0px 0px 0px 0px",height:"calc(100vh - 250px)"},attrs:{"show-sizer":!1,pagination:!0,pageSize:e.pageSize,valueField:"id",selectable:!0,pageNumber:e.pageNumber,"page-size-options":e.pageSizeOptions,dataSource:e.permissions},on:{"sync:state":function(t,s){return e.onSync_State("table_view_2W_1",t,s)},"click-row":function(t){return e.getSelectedPermission(t)},page:e.onPageChange},scopedSlots:e._u([{key:"loading",fn:function(){},proxy:!0},{key:"error",fn:function(){},proxy:!0},{key:"empty",fn:function(){},proxy:!0},{key:"dragGhost",fn:function(e){}}])},[s("u-table-view-column",{key:"table_view_column_2W_2",ref:"table_view_column_2W_2",scopedSlots:e._u([{key:"expander",fn:function(e){return[s("u-table-view-expander",{ref:"table_view_expander_2W_2_"+((e||{}).__nodeKey||(e||{}).index),attrs:{item:(e||{}).item}})]}},{key:"title",fn:function(){return[s("u-text",{ref:"text_2W_2",attrs:{text:"权限"}})]},proxy:!0},{key:"cell",fn:function(t){return[s("u-linear-layout",{ref:"linear_layout_Tz_1_"+((t||{}).__nodeKey||(t||{}).index),class:"cw-style-background-color cw-style-padding-left cw-style-padding cw-style-padding-right",staticStyle:{"--cw-style-padding-left":"6px","--cw-style-padding-right":"10px","--update-key":"ehcj","padding-left":"6px","padding-right":"10px"},attrs:{direction:"horizontal",wrap:!0}},[s("u-text",{ref:"text_2W_4_"+((t||{}).__nodeKey||(t||{}).index),class:"cw-style-font-size",staticStyle:{"--cw-style-font-size":"20px","font-size":"20px"},attrs:{text:e.$utils["ToString"]("nasl.core.Long",((t||{}).item||{}).name),overflow:"break"}})],1)]}},{key:"editcell",fn:function(e){}},{key:"expand-content",fn:function(e){}}])}),s("u-table-view-column",{key:"table_view_column_2W_3",ref:"table_view_column_2W_3",attrs:{width:600},scopedSlots:e._u([{key:"expander",fn:function(e){return[s("u-table-view-expander",{ref:"table_view_expander_2W_3_"+((e||{}).__nodeKey||(e||{}).index),attrs:{item:(e||{}).item}})]}},{key:"title",fn:function(){return[s("u-text",{ref:"text_2W_5",attrs:{text:"描述"}})]},proxy:!0},{key:"cell",fn:function(t){return[s("u-linear-layout",{ref:"linear_layout_Tz_2_"+((t||{}).__nodeKey||(t||{}).index),class:"cw-style-width cw-style-height cw-style-background-color cw-style-padding-left cw-style-padding cw-style-padding-right",staticStyle:{"--cw-style-width":"100%","--cw-style-height":"100%","--cw-style-padding-left":"6px","--cw-style-padding-right":"10px","padding-left":"6px","--update-key":"w6k6","padding-right":"10px",width:"100%",height:"100%","min-height":"43px"},attrs:{direction:"horizontal",wrap:!0}},[s("u-text",{ref:"text_2W_6_"+((t||{}).__nodeKey||(t||{}).index),class:"cw-style-font-size",staticStyle:{"--cw-style-font-size":"20px","font-size":"20px"},attrs:{text:e.$utils["ToString"]("nasl.core.String",t.item.description),overflow:"break"}})],1)]}},{key:"editcell",fn:function(e){}},{key:"expand-content",fn:function(e){}}])})],1),s("u-linear-layout",{ref:"linear_layout_bt1",class:"cw-style-height cw-style-margin-bottom cw-style-margin",staticStyle:{"--cw-style-height":"64px","--cw-style-margin-bottom":"8px",height:"64px","margin-bottom":"8px","--update-key":"e5w0"},attrs:{wrap:!0,mode:"flex",direction:"horizontal",justify:"center",alignment:"center"}},[s("div",{staticClass:"pallet-inventory"},[s("div",{staticClass:"content-box"},[s("router-view")],1),s("div",{staticClass:"bottom-btn"},[s("el-button",{directives:[{name:"longpress",rawName:"v-longpress"}],attrs:{type:"primary"},on:{click:function(t){return e.addNewPermission()}}},[e._v(" 新建 ")]),s("el-button",{directives:[{name:"longpress",rawName:"v-longpress"}],attrs:{type:"warning"},on:{click:function(t){return e.modifyPermission()}}},[e._v("修改")]),s("el-button",{directives:[{name:"longpress",rawName:"v-longpress"}],attrs:{type:"success"},on:{click:function(t){return e.deletePermission()}}},[e._v(" 删除 ")])],1)])])],1)],1),s("u-modal",{ref:"modal_Manual",class:"cw-style-width cw-style-height cw-style-text-align",staticStyle:{"--cw-style-width":"800px","--cw-style-height":"500px","--cw-style-text-align":"center","--modal-dialog-background-color":"#4e5969","--modal-body-margin":"0","--modal-close-right":"12px","--modal-foot-padding":"0px 0px","--modal-dialog-width":"400px","--modal-close-color":"#ffffff","--modal-border-color":"#4e5969",width:"800px","text-align":"center",height:"500px","--custom-start":"auto","dialog-height":"1000px"},attrs:{size:"auto"},scopedSlots:e._u([{key:"foot",fn:function(){return[s("u-linear-layout",{ref:"linear_layout_47",class:"cw-style-margin-bottom cw-style-margin cw-style-margin-top",staticStyle:{"--cw-style-margin-bottom":"10px","--cw-style-margin-top":"40px","margin-top":"40px","--update-key":"qqgf","margin-bottom":"10px"},attrs:{direction:"horizontal",wrap:!0}},[s("u-button",{ref:"button_14",attrs:{color:"primary",text:"下一步",size:"large"},on:{click:function(t){return e.nextStep(t,e.permissionInfo)}}})],1)]},proxy:!0},{key:"body",fn:function(){return[s("u-linear-layout",{ref:"linear_layout_44",class:"cw-style-text-align cw-style-padding-left cw-style-padding cw-style-padding-right cw-style-margin-top cw-style-margin",staticStyle:{"--cw-style-text-align":"left","--cw-style-padding-left":"40px","--cw-style-padding-right":"40px","--cw-style-margin-top":"20px","text-align":"left","padding-right":"40px","--update-key":"3t34","padding-left":"40px","margin-top":"20px"},attrs:{justify:"auto",wrap:!0}},[s("u-linear-layout",{ref:"linear_layout_45",attrs:{wrap:!0}},[s("u-form",{key:"form_2",ref:"form_2",attrs:{labelLayout:"inline"}},[s("u-form-item",{ref:"form_item_4",class:"cw-style-font-size cw-style-color",staticStyle:{"--cw-style-font-size":"25px","--cw-style-color":"#ffffff","font-size":"25px",color:"#ffffff"},attrs:{required:!0,rules:[{validate:"filled",message:"权限名称不得为空",trigger:"input+blur",required:!0}],layout:"center",labelSize:"normal",fieldSize:"normal"},scopedSlots:e._u([{key:"label",fn:function(){return[s("u-text",{ref:"text_79",class:"cw-style-font-size cw-style-color",staticStyle:{"--cw-style-font-size":"25px","--cw-style-color":"#fffefe",color:"#fffefe","font-size":"25px"},attrs:{text:"名称"}})]},proxy:!0}])},[s("u-input",{ref:"input_2",attrs:{placeholder:"请输入权限名称"},on:{focus:function(t){return e.onNumberInputFocus("name",e.permissionInfo.name)}},model:{value:e.permissionInfo.name,callback:function(t){e.$set(e.permissionInfo,"name",t)},expression:"permissionInfo.name"}})],1),s("u-form-item",{ref:"form_item_7",class:"cw-style-font-size cw-style-color",staticStyle:{"--cw-style-font-size":"25px","--cw-style-color":"#ffffff","font-size":"25px",color:"#ffffff"},attrs:{required:!0,rules:[{validate:"filled",message:"权限描述不得为空",trigger:"input+blur",required:!0}],layout:"center"},scopedSlots:e._u([{key:"label",fn:function(){return[s("u-text",{ref:"text_83",class:"cw-style-color",staticStyle:{"--cw-style-color":"#fffefe",color:"#fffefe"},attrs:{text:"描述"}})]},proxy:!0}])},[s("u-input",{ref:"input_3",attrs:{placeholder:"请输入权限描述"},on:{focus:function(t){return e.onNumberInputFocus("description",e.permissionInfo.description)}},model:{value:e.permissionInfo.description,callback:function(t){e.$set(e.permissionInfo,"description",t)},expression:"permissionInfo.description"}})],1)],1)],1)],1)]},proxy:!0},{key:"title",fn:function(){return[s("u-text",{ref:"text_62",class:"cw-style-font-size cw-style-color",staticStyle:{"--cw-style-font-size":"22px","--cw-style-color":"#ffffff",color:"#ffffff","font-size":"22px"},attrs:{text:e.isupdate?"新建权限":"修改权限"}})]},proxy:!0}])}),s("u-modal",{ref:"modal_5",class:"cw-style-width cw-style-height cw-style-text-align",staticStyle:{"--cw-style-width":"800px","--cw-style-height":"500px","--cw-style-text-align":"center","--modal-dialog-background-color":"#4e5969","--modal-body-margin":"0","--modal-close-right":"12px","--modal-foot-padding":"0px 0px","--modal-dialog-width":"400px","--modal-close-color":"#ffffff","--modal-border-color":"#4e5969",width:"800px","text-align":"center",height:"500px","--custom-start":"auto","dialog-height":"1000px"},attrs:{size:"huge"},scopedSlots:e._u([{key:"foot",fn:function(){return[s("u-linear-layout",{ref:"linear_layout_49",class:"cw-style-margin-bottom cw-style-margin cw-style-margin-top",staticStyle:{"--cw-style-margin-bottom":"10px","--cw-style-margin-top":"30px","margin-top":"30px","--update-key":"szdy","margin-bottom":"10px"},attrs:{direction:"horizontal",wrap:!0}},[s("u-button",{ref:"button_17",attrs:{color:"primary",text:"下一页",size:"large"},on:{mouseup:function(t){return e.chooseTray()}}})],1)]},proxy:!0},{key:"body",fn:function(){return[s("u-grid-layout",{ref:"grid_layout_20",staticStyle:{"margin-bottom":"30px"}},[s("u-grid-layout-row",{ref:"grid_layout_row_20",class:"cw-style-text-align cw-style-margin-top cw-style-margin",staticStyle:{height:"400px","--cw-style-text-align":"center","text-align":"center","--update-key":"yak6"},attrs:{repeat:24}},[s("div",{staticClass:"custom-tree-container"},[s("div",{staticClass:"block"},[s("el-tree",{ref:"elTree",attrs:{id:"elTree",data:e.resourceJson,"show-checkbox":"","highlight-current":"","node-key":"id","default-checked-keys":e.defaultSelectedNode},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.node,r=t.data;return s("span",{staticClass:"custom-tree-node"},[s("span",[e._v(e._s(o.label))]),s("span",[s("el-button",{directives:[{name:"longpress",rawName:"v-longpress"}],attrs:{type:"primary"},on:{click:function(){return e.append(o,r)}}},[e._v(" 新增 ")]),s("el-button",{directives:[{name:"longpress",rawName:"v-longpress"}],attrs:{type:"warning"},on:{click:function(){return e.remove(o,r)}}},[e._v(" 删除 ")])],1)])}}])})],1)])])],1)]},proxy:!0},{key:"title",fn:function(){return[s("u-text",{ref:"text_89",class:"cw-style-font-size cw-style-color",staticStyle:{"--cw-style-font-size":"22px","--cw-style-color":"#ffffff",color:"#ffffff","font-size":"22px"},attrs:{text:"权限"}})]},proxy:!0}])}),s("u-modal",{ref:"modal_7",class:"cw-style-width cw-style-height cw-style-text-align",staticStyle:{"--cw-style-width":"800px","--cw-style-height":"500px","--cw-style-text-align":"center","--modal-dialog-background-color":"#4e5969","--modal-body-margin":"0","--modal-close-right":"12px","--modal-foot-padding":"0px 0px","--modal-dialog-width":"400px","--modal-close-color":"#ffffff","--modal-border-color":"#4e5969",width:"800px","text-align":"center",height:"500px","--custom-start":"auto","dialog-height":"1000px"},attrs:{size:"small"},scopedSlots:e._u([{key:"foot",fn:function(){return[s("u-linear-layout",{ref:"linear_layout_71",class:"cw-style-margin-bottom cw-style-margin cw-style-margin-top",staticStyle:{"--cw-style-margin-bottom":"10px","--cw-style-margin-top":"30px","margin-top":"30px","--update-key":"szdy","margin-bottom":"10px"},attrs:{direction:"horizontal",wrap:!0}},[s("u-button",{ref:"button_23",attrs:{color:"primary",text:"确认",size:"large"},on:{mouseup:function(t){return e.bindTray()}}})],1)]},proxy:!0},{key:"body",fn:function(){return[s("u-linear-layout",{ref:"linear_layout_72",class:"cw-style-margin-right cw-style-margin",staticStyle:{"--cw-style-margin-right":"20px","margin-right":"20px","--update-key":"pazd"},attrs:{direction:"horizontal",wrap:!0}},[s("u-table-view",{key:"tableView_3",ref:"tableView_3",staticStyle:{height:"calc(100vh - 600px)","text-align":"center"},attrs:{dataSource:e.trayList,dataSchema:"LoadPermissionTableView_2Structure",values:e.trayCodeList,valueField:"trayCode"},on:{"sync:state":function(t,s){return e.onSync_State("tableView_3",t,s)},"update:values":function(t){e.trayCodeList=t}},scopedSlots:e._u([{key:"loading",fn:function(){},proxy:!0},{key:"error",fn:function(){},proxy:!0},{key:"empty",fn:function(){},proxy:!0},{key:"dragGhost",fn:function(e){}}])},[s("u-table-view-column",{key:"table_view_column_17",ref:"table_view_column_17",staticStyle:{"text-align":"center"},attrs:{width:"15"},scopedSlots:e._u([{key:"expander",fn:function(e){return[s("u-table-view-expander",{ref:"table_view_expander_17_"+((e||{}).__nodeKey||(e||{}).index),attrs:{item:(e||{}).item}})]}},{key:"cell",fn:function(t){return[s("u-linear-layout",{ref:"linear_layout_78_"+((t||{}).__nodeKey||(t||{}).index),attrs:{gap:"small"}},[s("u-text",{ref:"text_143_"+((t||{}).__nodeKey||(t||{}).index),attrs:{text:e.$utils["ToString"]("nasl.core.String",t.item.trayCode)}})],1)]}},{key:"title",fn:function(){return[s("u-text",{ref:"text_144",attrs:{text:"托盘编号"}})]},proxy:!0},{key:"editcell",fn:function(e){}}])}),s("u-table-view-column",{key:"table_view_column_16",ref:"table_view_column_16",staticStyle:{"text-align":"center"},attrs:{type:"checkbox",width:"15"},scopedSlots:e._u([{key:"expander",fn:function(e){return[s("u-table-view-expander",{ref:"table_view_expander_16_"+((e||{}).__nodeKey||(e||{}).index),attrs:{item:(e||{}).item}})]}},{key:"cell",fn:function(e){}},{key:"title",fn:function(){},proxy:!0},{key:"editcell",fn:function(e){}}])})],1)],1)]},proxy:!0},{key:"title",fn:function(){return[s("u-text",{ref:"text_133",class:"cw-style-font-size cw-style-color",staticStyle:{"--cw-style-font-size":"20px","--cw-style-color":"#ffffff",color:"#ffffff","font-size":"20px"},attrs:{text:"启用托盘"}})]},proxy:!0}])}),s("u-modal",{ref:"modify_resource",class:"cw-style-width cw-style-height cw-style-text-align",staticStyle:{"--cw-style-width":"800px","--cw-style-height":"500px","--cw-style-text-align":"center","--modal-dialog-background-color":"#4e5969","--modal-body-margin":"0","--modal-close-right":"12px","--modal-foot-padding":"0px 0px","--modal-dialog-width":"400px","--modal-close-color":"#ffffff","--modal-border-color":"#4e5969",width:"800px","text-align":"center",height:"500px","--custom-start":"auto","dialog-height":"1000px"},attrs:{size:"auto"},scopedSlots:e._u([{key:"foot",fn:function(){return[s("u-linear-layout",{ref:"linear_layout_471",class:"cw-style-margin-bottom cw-style-margin cw-style-margin-top",staticStyle:{"--cw-style-margin-bottom":"10px","--cw-style-margin-top":"40px","margin-top":"40px","--update-key":"qqgf","margin-bottom":"10px"},attrs:{direction:"horizontal",wrap:!0}},[s("u-button",{ref:"button_141",attrs:{color:"primary",text:"确认新增",size:"large"},on:{click:function(t){return e.addNewResource(t,e.resourceInfo)}}})],1)]},proxy:!0},{key:"body",fn:function(){return[s("u-linear-layout",{ref:"linear_layout_441",class:"cw-style-text-align cw-style-padding-left cw-style-padding cw-style-padding-right cw-style-margin-top cw-style-margin",staticStyle:{"--cw-style-text-align":"left","--cw-style-padding-left":"40px","--cw-style-padding-right":"40px","--cw-style-margin-top":"20px","text-align":"left","padding-right":"40px","--update-key":"3t34","padding-left":"40px","margin-top":"20px"},attrs:{justify:"space-between",wrap:!0}},[s("u-linear-layout",{ref:"linear_layout_451",attrs:{wrap:!0}},[s("u-form",{key:"form_21",ref:"form_21",attrs:{labelLayout:"inline",labelSize:"small",gapHeight:"large",gapWidth:"large"}},[s("u-form-item",{ref:"form_item_51",class:"cw-style-font-size cw-style-color",staticStyle:{"--cw-style-font-size":"16px","--cw-style-color":"#ffffff","font-size":"16px",color:"#ffffff"},attrs:{required:!0,rules:[{validate:"filled",message:"资源名称不得为空",trigger:"input+blur",required:!0}],layout:"center",labelSize:"normal"},scopedSlots:e._u([{key:"label",fn:function(){return[s("u-text",{ref:"text_801",class:"cw-style-color",staticStyle:{"--cw-style-color":"#fffefe",color:"#fffefe"},attrs:{text:"资源名称"}})]},proxy:!0}])},[s("u-input",{ref:"input_51",attrs:{placeholder:"请输入资源名称",clearable:!0},on:{focus:function(t){return e.onNumberInputFocus("resourceName",e.resourceInfo.name)}},model:{value:e.resourceInfo.name,callback:function(t){e.$set(e.resourceInfo,"name",t)},expression:"resourceInfo.name"}})],1),s("u-form-item",{ref:"form_item_72",class:"cw-style-font-size cw-style-color",staticStyle:{"--cw-style-font-size":"16px","--cw-style-color":"#ffffff","font-size":"16px",color:"#ffffff"},attrs:{required:!0,layout:"center",rules:[{validate:"filled",message:"资源路径不得为空",trigger:"input+blur",required:!0}]},scopedSlots:e._u([{key:"label",fn:function(){return[s("u-text",{ref:"text_832",class:"cw-style-color",staticStyle:{"--cw-style-font-size":"16px","--cw-style-color":"#fffefe",color:"#fffefe","font-size":"16px"},attrs:{text:"资源路径"}})]},proxy:!0}])},[s("u-input",{ref:"input_32",attrs:{placeholder:"请输入资源路径"},on:{focus:function(t){return e.onNumberInputFocus("resourcePath",e.resourceInfo.path)}},model:{value:e.resourceInfo.path,callback:function(t){e.$set(e.resourceInfo,"path",t)},expression:"resourceInfo.path"}})],1)],1)],1)],1)]},proxy:!0},{key:"title",fn:function(){return[s("u-text",{ref:"text_622",class:"cw-style-font-size cw-style-color",staticStyle:{"--cw-style-font-size":"22px","--cw-style-color":"#ffffff",color:"#ffffff","font-size":"22px"},attrs:{text:"新增菜单"}})]},proxy:!0}])}),s("KeyboardDialog",{attrs:{input:e.trayNum},on:{"update:input":function(t){e.trayNum=t}},model:{value:e.showKeyboardDialog,callback:function(t){e.showKeyboardDialog=t},expression:"showKeyboardDialog"}})],1)},r=[],i=(s("9e1f"),s("450d"),s("6ed5")),a=s.n(i),n=(s("14d9"),s("e9f5"),s("d866"),s("7d54"),s("ab43"),s("1e70"),s("79a4"),s("c1a1"),s("8b00"),s("a4e7"),s("1e5a"),s("72c3"),s("b7ef"),s("8617")),l=s("65b2");let c=void 0;var d={mixins:[],data(){return{defaultSelectedNode:[],resourceInfo:{id:void 0,name:"",path:""},trayList:[],mappedResourceIdList:[],notMappedResourceIdList:[],permission:{id:void 0,name:"",description:""},permissionNameList:[],notAddResouces:[],addResouces:[],permissionOldIdList:[],currentName:void 0,confirmPassword:"",newPassword:"",user:{},permissionInfo:{id:void 0,name:"",description:""},isupdate:void 0,testData:"abc",tableScrollTop:0,pageSize:5,pageNumber:1,showKeyboardDialog:!1,showLetterKeyboardDialog:!1,trayNum:"",pageint:void 0,selectTray:this.$genInitFromSchema("app.structures.TrayDto",void 0),state1:void 0,state2:void 0,btnBool:!1,getBtnBool:!0,table_view_2W_1_state_page:void 0,"private-data-source-cache":new Map,permissions:[],mappedResourceList:[],notMappedResourceList:[],selectedPermissionId:"",trayCodeList:[],selectedPermission:{},resourceJson:[],selectedChild:{},parentNode:{}}},computed:{pageSizeOptions(){return[this.pageSize]}},watch:{trayNum(e){"name"===this.currentType?this.permissionInfo.name=e:"description"===this.currentType?this.permissionInfo.description=e:"resourceName"===this.currentType?this.resourceInfo.name=e:"resourcePath"===this.currentType&&(this.resourceInfo.path=e)}},components:{KeyboardDialog:n["a"]},meta:{title:"本机用户",crumb:void 0,crumbI18n:void 0,first:void 0,auth:void 0},async mounted(){this.setPageSize(),window.addEventListener("resize",()=>{this.setPageSize()})},beforeDestroy(){clearInterval(c),c=void 0},methods:{async addNewResource(){let e=await this.findMaxId(this.resourceJson);const t=this.resourceInfo.path.lastIndexOf("/");let s=-1!==t?this.resourceInfo.path.substring(t+1):this.resourceInfo.name;const o={id:e+1,label:this.resourceInfo.name,path:this.resourceInfo.path,name:s,parentId:this.selectedChild.id,children:[]};this.selectedChild.children||this.$set(this.selectedChild,"children",[]),this.selectedChild.children.push(o);const r="权限 - 确认新增",i=btoa(unescape(encodeURIComponent(r)));let a=await l["a"].post("/gw/screenDev/v1/menu/addNewMenu",o,{headers:{"X-Operation-Name":i}});200===a.data.code?(await this.getMenuTree(),await this.$toast.success("新增菜单成功"),this.resourceInfo={}):await this.$toast.error("新增菜单失败"),await(this.$refs&&this.$refs["modify_resource"]&&this.$refs["modify_resource"].close&&this.$refs["modify_resource"].close())},async findMaxId(e){let t=0;function s(e){e.forEach(e=>{e.id>t&&(t=e.id),e.children&&Array.isArray(e.children)&&s(e.children)})}return s(e),t},async append(e,t){await(this.$refs&&this.$refs["modify_resource"]&&this.$refs["modify_resource"].open&&this.$refs["modify_resource"].open()),this.parentNode=e.parent,this.selectedChild=t},async remove(e,t){console.log("22222222222222222222"),a.a.confirm("确定删除该菜单吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",zIndex:999999}).then(async()=>{console.log(t);let e=[];e.push(t);let s=await this.getAllIds(e);const o="权限 - 删除",r=btoa(unescape(encodeURIComponent(o)));await l["a"].post("/gw/screenDev/v1/menu/deleteMenu",{permissionId:this.permissionInfo.id,resourceIds:s},{headers:{"X-Operation-Name":r}}).then(e=>{200===e.data.code?(this.getMenuTree(),this.$toast.success(this.$utils["ToString"]("nasl.core.String","删除菜单成功"))):this.$toast.error(this.$utils["ToString"]("nasl.core.String",e.data.message))})}).catch(()=>{this.$toast.info(this.$utils["ToString"]("nasl.core.String","取消删除"))})},async getSelectedPermission(e){this.selectedPermission=e.item},onNumberInputFocus(e,t){this.currentType=e,this.trayNum=null!=t?t:"",this.showKeyboardDialog=!0},async bindTray(){console.log("选中托盘: {}",this.trayCodeList);const e=this.trayCodeList.map(Number);let t={trayCodeList:e,permissionId:this.permissionInfo.id};const s="权限 - 启用托盘",o=btoa(unescape(encodeURIComponent(s)));let r=await l["a"].post("/gw/screenDev/v1/permission/saveOrUpdatePerTrayMap",t,{headers:{"X-Operation-Name":o}});200===r.data.code?console.log("2222"):this.$toast.error(this.$utils["ToString"]("nasl.core.String",r.data.message)),await this.$refs["modal_7"]&&this.$refs["modal_7"].close(),await this.getPermissions()},async unBindResource(){console.log("选中已绑定: {}",this.mappedResourceIdList),console.log(this.permissionInfo);let e={resourceIds:this.mappedResourceIdList,permissionId:this.permissionInfo.id},t=await l["a"].post("/gw/screenDev/v1/permission/removePermissionResMap",e);200===t.data.code?(console.log("2222"),await this.getMappedOrNotResource("mapped"),await this.getMappedOrNotResource("notMapped")):this.$toast.error(this.$utils["ToString"]("nasl.core.String",t.data.message))},async getAllIds(e){const t=new Set;function s(e){e&&(void 0!==e.id&&t.add(e.id),e.children&&Array.isArray(e.children)&&e.children.forEach(s))}return e.forEach(s),Array.from(t)},async bindResource(){const e="权限 - 下一页",t=btoa(unescape(encodeURIComponent(e)));let s=this.$refs.elTree.getCheckedNodes(!1,!1),o=this.$refs.elTree.getHalfCheckedKeys(),r=await this.getAllIds(s);this.mappedResourceList=[...new Set([...o,...r])],console.log("选中: {}",this.mappedResourceList);let i={resourceIds:this.mappedResourceList,permissionId:this.permissionInfo.id},a=await l["a"].post("/gw/screenDev/v1/permission/savePermissionResMap",i,{headers:{"X-Operation-Name":t}});200===a.data.code?await this.getMenuTree():this.$toast.error(this.$utils["ToString"]("nasl.core.String",a.data.message))},async chooseTray(){await(async()=>{await this.bindResource(),await(this.$refs&&this.$refs["modal_5"]&&this.$refs["modal_5"].close&&this.$refs["modal_5"].close()),this.notMappedResourceIdList=[],this.mappedResourceIdList=[],await this.getBindedTrayCode(),await this.getTrayCodeList(),await(this.$refs&&this.$refs["modal_7"]&&this.$refs["modal_7"].open&&this.$refs["modal_7"].open())})()},async getBindedTrayCode(){await l["a"].get("/gw/screenDev/v1/permission/getBindedTrayList",{params:{permissionId:this.permissionInfo.id}}).then(e=>{if(200===(e||{}).data.code){let t=(e||{}).data.result;this.trayCodeList=t.map(String),console.log(this.trayCodeList)}else this.$toast.error(this.$utils["ToString"]("nasl.core.String",e.data.message))})},async getTrayCodeList(){await l["a"].get("/gw/screenDev/v1/sys/machine/getTrays").then(e=>{console.log(e),200===(e||{}).data.code?this.trayList=(e||{}).data.result:this.$toast.error(this.$utils["ToString"]("nasl.core.String",e.data.message))})},async saveOrupdateUserInfo(e){let t=!0;if(this.isupdate){const s="权限 - 确认新增",o=btoa(unescape(encodeURIComponent(s)));await l["a"].post("/gw/screenDev/v1/permission/addPermission",e,{headers:{"X-Operation-Name":o}}).then(e=>{console.log(e),200===(e||{}).data.code?(this.permissionInfo=(e||{}).data.result,console.log("新增成功")):(this.$toast.error(this.$utils["ToString"]("nasl.core.String",e.data.message)),t=!1)})}else{const s="权限 - 修改新增",o=btoa(unescape(encodeURIComponent(s)));await l["a"].post("/gw/screenDev/v1/permission/updatePermission",e,{headers:{"X-Operation-Name":o}}).then(e=>{200===(e||{}).data.code?(this.permissionInfo=(e||{}).data.result,console.log("更新成功")):(this.$toast.error(this.$utils["ToString"]("nasl.core.String",e.data.message)),t=!1)})}return t},async getMappedOrNotResource(e){console.log(this.permissionInfo),await l["a"].get("/gw/screenDev/v1/permission/getMappedOrNotResource?type="+e+"&permissionId="+this.permissionInfo.id).then(t=>{200===(t||{}).data.code&&("mapped"===e?this.mappedResourceList=(t||{}).data.result:this.notMappedResourceList=(t||{}).data.result)})},async nextStep(e,t){await(async()=>{if(null===t.name||""===t.name)return void this.$toast.warning(this.$utils["ToString"]("nasl.core.String","权限名称不能为空"));if(null===t.description||""===t.description)return void this.$toast.warning(this.$utils["ToString"]("nasl.core.String","权限描述不能为空"));const e=this.permissions.map(e=>e.name);if(this.isupdate&&e.includes(t.name))return void this.$toast.warning(this.$utils["ToString"]("nasl.core.String","权限已存在，请重新填写"));let s=await this.saveOrupdateUserInfo(t);s&&(await(this.$refs&&this.$refs["modal_Manual"]&&this.$refs["modal_Manual"].close&&this.$refs["modal_Manual"].close()),await this.getMenuTree(),await this.getMappedOrNotResource("mapped"),this.defaultSelectedNode=this.mappedResourceList.map(e=>e.resourceId),await(this.$refs&&this.$refs["modal_5"]&&this.$refs["modal_5"].open&&this.$refs["modal_5"].open()))})()},async findNodesByIds(e,t){const s=[];function o(e){e.forEach(e=>{t.includes(e.id)&&(delete e["children"],s.push(e)),e.children&&o(e.children)})}return o(e),s},async getMenuTree(){let e=await l["a"].get("/gw/screenDev/v1/menu/buildTree");200===e.data.code?this.resourceJson=e.data.result:this.$toast.error(this.$utils["ToString"]("nasl.core.String","获取路径资源失败"))},async deletePermission(){0!==Object.keys(this.selectedPermission).length?a.a.confirm("确定删除该权限吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const e="权限 - 删除",t=btoa(unescape(encodeURIComponent(e)));l["a"].post("/gw/screenDev/v1/permission/deletePermission",this.selectedPermission,{headers:{"X-Operation-Name":t}}).then(e=>{200===e.data.code?(this.getPermissions(),this.$toast.success(this.$utils["ToString"]("nasl.core.String","删除成功"))):this.$toast.error(this.$utils["ToString"]("nasl.core.String",e.data.message))})}).catch(()=>{this.$toast.info(this.$utils["ToString"]("nasl.core.String","取消删除"))}):this.$toast.warning(this.$utils["ToString"]("nasl.core.String","请选择要删除的权限"))},async modifyPermission(){await(async()=>{if(0===Object.keys(this.selectedPermission).length)return void this.$toast.warning(this.$utils["ToString"]("nasl.core.String","请选择要修改的权限"));this.isupdate=!1;let e=await l["a"].get("/gw/screenDev/v1/permission/getPermissionById?id="+this.selectedPermission.id);200===e.data.code&&(this.permissionInfo=e.data.result),await(this.$refs&&this.$refs["modal_Manual"]&&this.$refs["modal_Manual"].open&&this.$refs["modal_Manual"].open())})()},async clearObjectValues(e){for(let t in e)e.hasOwnProperty(t)&&(e[t]="password"===t?"123456":null)},async addNewPermission(){await(async()=>{this.isupdate=!0,await this.clearObjectValues(this.permissionInfo),console.log(this.permissionInfo),await(this.$refs&&this.$refs["modal_Manual"]&&this.$refs["modal_Manual"].open&&this.$refs["modal_Manual"].open())})()},async getAllResources(){let e=await l["a"].get("/gw/screenDev/v1/permission/getResourceList");200===e.data.code&&(this.notMappedResourceList=e.data.result)},setPageSize(){const e=window.innerHeight,t=e-300;this.pageSize=Math.floor(t/43)},async getPermissions(){let e=await l["a"].post("/gw/screenDev/v1/permission/getPermissionList");200===e.data.code&&(this.permissions=e.data.result)},async permissions_created(e){await(async()=>{await this.getPermissions()})();let t=window.localStorage.getItem("testMode");"true"==t&&(this.getBtnBool=!1)},async permissions_destroyed(e){await(async()=>{})()},async button_4_click(e){console.log("未使用端口已被注释","button_4_click")},onPageChange(e){const{size:t,number:s}=e;this.pageSize=t,this.pageNumber=s},__isShallowEqualArray(e,t){return e.length===t.length&&e.every((e,s)=>{const o=t[s];return typeof e===typeof o&&("string"===typeof e?e===o:"object"===typeof e&&["item","index","rowIndex","columnIndex","value"].every(t=>e[t]===o[t]))})},__getDataSourceCacheFn(e,t=[]){if(!t.length)return this["private-data-source-cache"].get(e);for(let[s,o]of this["private-data-source-cache"].entries())if(this.__isShallowEqualArray(s,[e,...t]))return o},__setDataSourceCacheFn(e,t=[],s){t.length?this["private-data-source-cache"].set([e,...t],s):this["private-data-source-cache"].set(e,s)},__getOrCreateDataSource(e,t=[],s){let o=this.__getDataSourceCacheFn(e,t);return o||(o=s,this.__setDataSourceCacheFn(e,t,o)),o},onSync_State(e,t,s){this[`${e}_state_${t}`]=s}},async created(){await this.permissions_created()},async destroyed(){await this.permissions_destroyed()}},u=d,p=(s("75d4"),s("2877")),f=Object(p["a"])(u,o,r,!1,null,null,null);t["default"]=f.exports},"11df":function(e,t,s){},"75d4":function(e,t,s){"use strict";s("11df")},b7ef:function(e,t,s){"use strict";var o=s("23e7"),r=s("cfe9"),i=s("d066"),a=s("5c6c"),n=s("9bf2").f,l=s("1a2d"),c=s("19aa"),d=s("7156"),u=s("e391"),p=s("cf98"),f=s("0d26"),y=s("83ab"),m=s("c430"),g="DOMException",h=i("Error"),w=i(g),_=function(){c(this,x);var e=arguments.length,t=u(e<1?void 0:arguments[0]),s=u(e<2?void 0:arguments[1],"Error"),o=new w(t,s),r=new h(t);return r.name=g,n(o,"stack",a(1,f(r.stack,1))),d(o,this,_),o},x=_.prototype=w.prototype,b="stack"in new h(g),S="stack"in new w(1,2),v=w&&y&&Object.getOwnPropertyDescriptor(r,g),I=!!v&&!(v.writable&&v.configurable),k=b&&!I&&!S;o({global:!0,constructor:!0,forced:m||k},{DOMException:k?_:w});var R=i(g),E=R.prototype;if(E.constructor!==R)for(var T in m||n(E,"constructor",a(1,R)),p)if(l(p,T)){var $=p[T],z=$.s;l(R,z)||n(R,z,a(6,$.c))}},cf98:function(e,t,s){"use strict";e.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}}}]);