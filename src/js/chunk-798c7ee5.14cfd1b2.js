(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-798c7ee5"],{2979:function(t,e,o){},"7be64":function(t,e,o){"use strict";o.r(e);var r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[t._m(0),o("div",{staticClass:"main-panel"},[o("div",{staticClass:"mode-indicator"},[o("span",[t._v("操作模式："+t._s(t.selectedMode))])]),o("p",{staticClass:"instruction"},[t._v("如下面选择操作模式：")]),o("div",{staticClass:"controls-container"},[o("div",{staticClass:"select-wrapper"},[o("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedMode,expression:"selectedMode"}],staticClass:"mode-select",on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedMode=e.target.multiple?o:o[0]}}},[o("option",[t._v("本机")]),o("option",[t._v("遥控")])]),o("div",{staticClass:"select-arrow"})]),o("div",{directives:[{name:"show",rawName:"v-show",value:"本机模式"===t.selectedMode,expression:"selectedMode === '本机模式'"}],staticClass:"checkbox-option"},[o("input",{staticClass:"custom-checkbox",attrs:{type:"checkbox",id:"tray"}}),o("label",{attrs:{for:"tray"}},[t._v("提取托盘")])]),o("button",{directives:[{name:"longpress",rawName:"v-longpress"}],staticClass:"apply-btn",attrs:{disabled:t.isButtonDisabled},on:{mouseup:t.handleApply}},[t._v("应用")])])]),o("u-modal",{ref:"modal_Manual",class:"cw-style-height",staticStyle:{"--cw-style-height":"400px","--modal-dialog-background-color":"#4e5969","--modal-body-margin":"0",height:"400px","--modal-close-right":"12px","--modal-foot-padding":"0px 0px","--modal-dialog-width":"400px","--modal-close-color":"#ffffff","--modal-border-color":"#4e5969"},attrs:{size:"auto","is-foot-slot-empty":!0},scopedSlots:t._u([{key:"foot",fn:function(){},proxy:!0},{key:"body",fn:function(){return[o("u-linear-layout",{ref:"linear_layout_35",class:"cw-style-width cw-style-height cw-style-text-align cw-style-border-style cw-style-border-color cw-style-border-left-width cw-style-border-width cw-style-border-right-width cw-style-border-top-width cw-style-border-bottom-width",staticStyle:{"--cw-style-width":"512px","--cw-style-height":"267px","--cw-style-text-align":"center","--cw-style-border-style":"solid","--cw-style-border-color":"#ffffff","--cw-style-border-left-width":"0px","--cw-style-border-right-width":"0px","--cw-style-border-top-width":"1px","--cw-style-border-bottom-width":"0px",width:"512px","text-align":"center",height:"267px","border-color":"#ffffff","border-top-width":"1px","border-left-width":"0px","border-right-width":"0px","border-bottom-width":"0px","border-style":"solid","--update-key":"cnuj"},attrs:{direction:"horizontal",wrap:!0,mode:"flex",justify:"center",alignment:"center"}},[o("i-ico",{ref:"ico_51",class:"cw-style-font-size",staticStyle:{"--cw-style-font-size":"48px","font-size":"48px"},attrs:{name:"/assets/%E5%88%A0%E9%99%A4.svg"}},["B"==t.$global.frontendVariables.controlType?o("u-text",{key:"text_64",ref:"text_64",class:"cw-style-font-size cw-style-color",staticStyle:{"--cw-style-font-size":"20px","--cw-style-color":"#ffffff",color:"#ffffff","font-size":"20px"},attrs:{text:"确定要切换到手动？",display:"block"}}):t._e(),"A"==t.$global.frontendVariables.controlType?o("u-text",{key:"text_65",ref:"text_65",class:"cw-style-font-size cw-style-color",staticStyle:{"--cw-style-font-size":"20px","--cw-style-color":"#ffffff",color:"#ffffff","font-size":"20px"},attrs:{text:"确定要切换到自动？",display:"block"}}):t._e()],1)],1),o("u-linear-layout",{ref:"linear_layout_36",class:"cw-style-border-style cw-style-border-left-width cw-style-border-width cw-style-border-right-width cw-style-border-top-width cw-style-border-bottom-width",staticStyle:{"--cw-style-border-style":"solid","--cw-style-border-left-width":"0px","--cw-style-border-right-width":"0px","--cw-style-border-top-width":"0px","--cw-style-border-bottom-width":"0px","--space-base":"0px","border-top-width":"0px","border-left-width":"0px","border-right-width":"0px","border-bottom-width":"0px","border-style":"solid","--update-key":"9309"},attrs:{gap:"normal",mode:"flex",justify:"center",alignment:"center"}},[o("u-button",{directives:[{name:"longpress",rawName:"v-longpress"}],ref:"button_3",class:"cw-style-width cw-style-height cw-style-padding-top cw-style-padding cw-style-margin-bottom cw-style-margin cw-style-font-size cw-style-border-top-left-radius cw-style-border-radius cw-style-border-top-right-radius cw-style-border-bottom-left-radius cw-style-border-bottom-right-radius",staticStyle:{"--cw-style-width":"160px","--cw-style-height":"64px","--cw-style-padding-top":"12px","--cw-style-margin-bottom":"12px","--cw-style-font-size":"26px","--cw-style-border-top-left-radius":"8px","--cw-style-border-top-right-radius":"8px","--cw-style-border-bottom-left-radius":"8px","--cw-style-border-bottom-right-radius":"8px","--update-key":"up7c","margin-bottom":"12px",width:"160px",height:"64px",position:"static","font-size":"26px","padding-top":"12px","border-top-left-radius":"8px","border-top-right-radius":"8px","border-bottom-right-radius":"8px","border-bottom-left-radius":"8px","--custom-start":"auto",background:"linear-gradient(180deg, #a8b8ca 0%, #6b7886 100%)"},attrs:{text:"取 消",widthStretch:"false",heightStretch:"false",color:"primary_secondary"},on:{mouseup:function(e){return t.button_3_click(e)}}}),o("u-button",{directives:[{name:"longpress",rawName:"v-longpress"}],ref:"button_4",class:"cw-style-width cw-style-height cw-style-padding-left cw-style-padding cw-style-padding-top cw-style-padding-right cw-style-margin-left cw-style-margin cw-style-margin-bottom cw-style-font-size cw-style-border-top-left-radius cw-style-border-radius cw-style-border-top-right-radius cw-style-border-bottom-left-radius cw-style-border-bottom-right-radius",staticStyle:{"--cw-style-width":"160px","--cw-style-height":"64px","--cw-style-padding-left":"0px","--cw-style-padding-top":"12px","--cw-style-padding-right":"0px","--cw-style-margin-left":"8px","--cw-style-margin-bottom":"12px","--cw-style-font-size":"26px","--cw-style-border-top-left-radius":"8px","--cw-style-border-top-right-radius":"8px","--cw-style-border-bottom-left-radius":"8px","--cw-style-border-bottom-right-radius":"8px","--update-key":"t89u","margin-left":"8px","margin-bottom":"12px","padding-left":"0px","padding-right":"0px",width:"160px",height:"64px","font-size":"26px","padding-top":"12px","border-top-left-radius":"8px","border-top-right-radius":"8px","border-bottom-right-radius":"8px","border-bottom-left-radius":"8px","--custom-start":"auto",background:"linear-gradient(180deg, #4db1ff 0%, #1375ed 100%)"},attrs:{color:"primary",text:"确定",display:"inline",widthStretch:"false",heightStretch:"false"},on:{mouseup:function(e){return t.button_4_click(e)}}})],1)]},proxy:!0},{key:"title",fn:function(){return[o("u-text",{ref:"text_62",class:"cw-style-font-size cw-style-color",staticStyle:{"--cw-style-font-size":"22px","--cw-style-color":"#ffffff",color:"#ffffff","font-size":"22px"},attrs:{text:"确定"}})]},proxy:!0}])})],1)},s=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"header"},[o("h1",{staticClass:"title"},[t._v("操作模式")])])}],a=(o("b7ef"),o("65b2")),l=o("4360"),i=o("2f62"),c={data(){return{allMode:"",selectedMode:localStorage.getItem("operateMode")||"本机"}},computed:{...Object(i["b"])(["getUserResource"]),userResource(){return this.getUserResource},isButtonDisabled(){return console.log("quanbu1"+this.allMode),console.log("xz"+this.selectedMode),this.selectedMode===this.allMode}},created(){this.allMode=localStorage.getItem("operateMode")},methods:{async handleApply(){const t="操作模式 - 应用",e=btoa(unescape(encodeURIComponent(t)));if("A"==this.$global.frontendVariables.controlType){localStorage.setItem("operateMode",this.selectedMode);let t=localStorage.getItem("operateMode");"遥控"===t?await a["a"].get("/gw/screenDev/v1/remote/checkHealth",{headers:{"X-Operation-Name":e}}):"本机"===t&&await a["a"].get("/gw/screenDev/v1/remote/stopHealthCheckTask",{headers:{"X-Operation-Name":e}}),await(async()=>{this.logout()})()}else await(this.$refs&&this.$refs["modal_Manual"]&&this.$refs["modal_Manual"].open&&this.$refs["modal_Manual"].open())},async button_3_click(t){await(async()=>{await(this.$refs&&this.$refs["modal_Manual"]&&this.$refs["modal_Manual"].close&&this.$refs["modal_Manual"].close())})()},async button_4_click(t){const e="A"===this.$global.frontendVariables.controlType?"1":"0",o={value:e,tagName:"HMI_bAuto"};try{const t="操作模式 - 确定要切换模式",e=btoa(unescape(encodeURIComponent(t))),r=await a["a"].post("/gw/screenDev/v1/sys/machine/process",o,{headers:{"X-Operation-Name":e}});200===r.data.code?("A"===this.$global.frontendVariables.controlType?this.$global.frontendVariables.controlType="B":this.$global.frontendVariables.controlType="A",await(this.$refs&&this.$refs["modal_Manual"]&&this.$refs["modal_Manual"].close&&this.$refs["modal_Manual"].close())):await this.$toast.error(this.$utils["ToString"]("nasl.core.String","系统繁忙，请重试！错误信息: "+r.data.message))}catch(r){console.error("Error during PLC process call:",r),await this.$toast.error(this.$utils["ToString"]("nasl.core.String","请求失败，请检查网络或联系管理员！"))}},async logout(){const t="操作模式 - 确定要切换模式",e=btoa(unescape(encodeURIComponent(t)));await a["a"].post("/gw/screenDev/v1/sys/logout",{headers:{"X-Operation-Name":e}}).then(()=>{l["a"].commit("CLEAR_USER_RESOURCE"),l["a"].commit("CLEAR_ROUTE_DATA"),localStorage.removeItem("token"),localStorage.removeItem("userInfo"),a["a"].defaults.headers.common["Authorization"]=""}).catch(t=>{console.error("服务端清空token失败:",t),l["a"].commit("CLEAR_USER_RESOURCE"),l["a"].commit("CLEAR_ROUTE_DATA"),localStorage.removeItem("token"),localStorage.removeItem("userInfo"),a["a"].defaults.headers.common["Authorization"]="",a["a"].defaults.headers.common["Authorization"]=""}),window.location.href="/login"}}},d=c,n=(o("e673"),o("2877")),p=Object(n["a"])(d,r,s,!1,null,"d93afb12",null);e["default"]=p.exports},b7ef:function(t,e,o){"use strict";var r=o("23e7"),s=o("cfe9"),a=o("d066"),l=o("5c6c"),i=o("9bf2").f,c=o("1a2d"),d=o("19aa"),n=o("7156"),p=o("e391"),f=o("cf98"),w=o("0d26"),y=o("83ab"),u=o("c430"),h="DOMException",m=a("Error"),b=a(h),g=function(){d(this,x);var t=arguments.length,e=p(t<1?void 0:arguments[0]),o=p(t<2?void 0:arguments[1],"Error"),r=new b(e,o),s=new m(e);return s.name=h,i(r,"stack",l(1,w(s.stack,1))),n(r,this,g),r},x=g.prototype=b.prototype,_="stack"in new m(h),E="stack"in new b(1,2),R=b&&y&&Object.getOwnPropertyDescriptor(s,h),v=!!R&&!(R.writable&&R.configurable),A=_&&!v&&!E;r({global:!0,constructor:!0,forced:u||A},{DOMException:A?g:b});var S=a(h),I=S.prototype;if(I.constructor!==S)for(var M in u||i(I,"constructor",l(1,S)),f)if(c(f,M)){var T=f[M],C=T.s;c(S,C)||i(S,C,l(6,T.c))}},cf98:function(t,e,o){"use strict";t.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},e673:function(t,e,o){"use strict";o("2979")}}]);