(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f8ebce8"],{"2a21":function(t,e,r){"use strict";r("96d6")},"6d84":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("u-linear-layout",{ref:"linear_layout_kt_1",staticStyle:{height:"100vh",overflow:"hidden"},attrs:{gap:"none"}},[r("u-linear-layout",{ref:"linear_layout_kt_10",class:"cw-style-height cw-style-margin-top cw-style-margin",staticStyle:{"--cw-style-height":"auto","--cw-style-margin-top":"12px","margin-top":"12px","--update-key":"1q39",height:"100vh",overflow:"hidden"},attrs:{direction:"horizontal",wrap:!0}},[r("u-divider",{ref:"divider_1",staticStyle:{"margin-top":"0px"},attrs:{dashed:"a",contentPosition:"center"}},[r("u-text",{ref:"text_965",staticStyle:{"--cw-style-font-size":"20px","--cw-style-color":"#ffffff",color:"#ffffff","font-size":"20px"},attrs:{text:"任务清单 ",display:"inline"}})],1),r("div",{staticClass:"container"},[r("el-table",{ref:"tableView",staticStyle:{width:"100%",height:"430px"},attrs:{data:t.filteredData,stripe:!1,"highlight-current-row":!0,"header-cell-style":{textAlign:"center"},"cell-style":{textAlign:"center"}},on:{"row-click":t.handleRowClick}},[r("el-table-column",{staticStyle:{"border-collapse":"collapse",border:"1px solid black"},attrs:{prop:"gridId",label:"指令"},scopedSlots:t._u([{key:"header",fn:function(){return[r("div",[t._v(" 指令 "),r("el-input",{staticStyle:{width:"100%",padding:"0 5px","margin-top":"5px"},attrs:{placeholder:"搜索指令"},on:{change:t.handleSearch,focus:function(e){return t.onTestDataInputFocus("gridSearch",t.gridSearch)}},model:{value:t.gridSearch,callback:function(e){t.gridSearch=e},expression:"gridSearch"}})],1)]},proxy:!0},{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.instructionName))])]}}])}),r("el-table-column",{staticStyle:{"border-collapse":"collapse",border:"1px solid black"},attrs:{prop:"goodsCode",label:"描述"},scopedSlots:t._u([{key:"header",fn:function(){return[r("div",[t._v(" 描述 "),r("el-input",{staticStyle:{width:"100%",padding:"0 5px","margin-top":"5px"},attrs:{placeholder:"搜索描述"},on:{input:t.handleSearch,focus:function(e){return t.onTestDataInputFocus("goodsCodeSearch",t.goodsCodeSearch)}},model:{value:t.goodsCodeSearch,callback:function(e){t.goodsCodeSearch=e},expression:"goodsCodeSearch"}})],1)]},proxy:!0},{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.description))])]}}])}),r("el-table-column",{staticStyle:{"border-collapse":"collapse",border:"1px solid black"},attrs:{prop:"goodsDescr",label:"机器"},scopedSlots:t._u([{key:"header",fn:function(){return[r("div",[t._v(" 机器 "),r("el-input",{staticStyle:{width:"100%",padding:"0 5px","margin-top":"5px"},attrs:{placeholder:"搜索机器"},on:{input:t.handleSearch,focus:function(e){return t.onTestDataInputFocus("goodsDescrSearch",t.goodsDescrSearch)}},model:{value:t.goodsDescrSearch,callback:function(e){t.goodsDescrSearch=e},expression:"goodsDescrSearch"}})],1)]},proxy:!0},{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.equipmentCode))])]}}])}),r("el-table-column",{staticStyle:{"border-collapse":"collapse",border:"1px solid black"},attrs:{prop:"inventory",label:"状态"},scopedSlots:t._u([{key:"header",fn:function(){return[r("div",[t._v(" 状态 "),r("el-input",{staticStyle:{width:"100%",padding:"0 5px","margin-top":"5px"},attrs:{placeholder:"搜索状态"},on:{input:t.handleSearch,focus:function(e){return t.onTestDataInputFocus("inventorySearch",t.inventorySearch)}},model:{value:t.inventorySearch,callback:function(e){t.inventorySearch=e},expression:"inventorySearch"}})],1)]},proxy:!0},{key:"default",fn:function(e){return[r("span",[t._v(t._s(t.statusDescription(e.row)))])]}}])})],1)],1),t._v(" "),r("u-linear-layout",{ref:"bottom_buttons",class:"cw-style-height cw-style-background-color",staticStyle:{"--cw-style-height":"100px","--cw-style-background-color":"#2c3e50",height:"150px","background-color":"#2c3e50"},attrs:{direction:"horizontal",wrap:!0}},[r("u-grid-layout-row",{ref:"grid_layout_row_2W_3",class:"cw-style-height cw-style-margin-left cw-style-margin cw-style-margin-bottom cw-style-margin-top cw-style-margin-right",staticStyle:{"--cw-style-height":"31vh","--cw-style-margin-left":"0px","--cw-style-margin-bottom":"8px","--cw-style-margin-top":"0px","--cw-style-margin-right":"0px","margin-left":"0px","--update-key":"a2yg","margin-right":"0px","margin-top":"0px","margin-bottom":"8px",height:"33vh"},attrs:{repeat:24}},[r("el-card",{staticClass:"status-info",attrs:{"body-style":{padding:"10px"}}},[r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:24}},[r("div",{staticClass:"info-item"},[r("span",{staticClass:"label"},[t._v("类别：")]),r("span",{staticClass:"value"},[t._v(t._s(t.category))])])]),r("el-col",{attrs:{span:24}},[r("div",{staticClass:"info-item"},[r("span",{staticClass:"label"},[t._v("指令位置：")]),r("span",{staticClass:"value"},[t._v(t._s(t.commandPosition))])])]),r("el-col",{attrs:{span:24}},[r("div",{staticClass:"info-item"},[r("span",{staticClass:"label"},[t._v("属性 1：")]),r("span",{staticClass:"value"},[t._v(t._s(t.attribute1))])])]),r("el-col",{attrs:{span:24}},[r("div",{staticClass:"info-item"},[r("span",{staticClass:"label"},[t._v("属性 2：")]),r("span",{staticClass:"value"},[t._v(t._s(t.attribute2))])])]),r("el-col",{attrs:{span:24}},[r("div",{staticClass:"info-item"},[r("span",{staticClass:"label"},[t._v("属性 3：")]),r("span",{staticClass:"value"},[t._v(t._s(t.attribute3))])])])],1)],1),r("u-linear-layout",{ref:"action_buttons",class:"cw-style-width cw-style-height",staticStyle:{"--cw-style-width":"60%","--cw-style-height":"100px",width:"60%",height:"100px"},attrs:{direction:"vertical",wrap:!0}},[r("u-linear-layout",{ref:"top_buttons",class:"cw-style-height",staticStyle:{"--cw-style-height":"50px",height:"64px","margin-top":"5px"},attrs:{direction:"horizontal",wrap:!0}},[r("el-button",{directives:[{name:"longpress",rawName:"v-longpress"}],staticStyle:{width:"32%",height:"100%"},attrs:{type:"primary"},on:{click:function(e){return t.button_run(e)}}},[t._v(" 执行 ")]),r("el-button",{directives:[{name:"longpress",rawName:"v-longpress"}],staticStyle:{width:"32%",height:"100%"},attrs:{type:"danger"}},[t._v(" 暂停 ")]),r("el-button",{directives:[{name:"longpress",rawName:"v-longpress"}],staticStyle:{width:"32%",height:"100%"},attrs:{type:"danger"},on:{click:function(e){return t.button_stop(e)}}},[t._v(" 取消 ")])],1),r("u-linear-layout",{ref:"bottom_buttons",class:"cw-style-height",staticStyle:{"--cw-style-height":"50px",height:"64px","margin-top":"5px"},attrs:{direction:"horizontal",wrap:!0}},[t.hasPermission("ROW_BATCH_ORDER")?r("el-button",{directives:[{name:"longpress",rawName:"v-longpress"}],staticStyle:{width:"32%",height:"100%"},attrs:{type:"warning"},on:{click:function(e){return t.button_2W_38_click(e)}}},[t._v(" 行 ")]):t._e(),r("el-button",{directives:[{name:"longpress",rawName:"v-longpress"}],staticStyle:{width:"32%",height:"100%"},attrs:{type:"warning"}},[t._v(" 容器 ")]),r("el-button",{directives:[{name:"longpress",rawName:"v-longpress"}],staticStyle:{width:"32%",height:"100%"},attrs:{type:"warning"}},[t._v(" 报告 ")])],1)],1)],1)],1)],1),r("KeyboardDialog",{attrs:{input:t.trayNum},on:{"update:input":function(e){t.trayNum=e}},model:{value:t.showLetterKeyboardDialog,callback:function(e){t.showLetterKeyboardDialog=e},expression:"showLetterKeyboardDialog"}})],1)},s=[],i=(r("f4f9"),r("450d"),r("c2cc")),o=r.n(i),n=(r("7a0f"),r("0f6c")),c=r.n(n),l=(r("b8e0"),r("a4c4")),d=r.n(l),u=(r("14d9"),r("e9f5"),r("d866"),r("910d"),r("f665"),r("ab43"),r("1e70"),r("79a4"),r("c1a1"),r("8b00"),r("a4e7"),r("1e5a"),r("72c3"),r("b7ef"),r("8617")),h=r("65b2"),p=r("2f62");const y={mounted(){document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.onKeyUp)},beforeDestroy(){document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp)},methods:{async onKeyDown(t){},async onKeyUp(t){}}};var g={components:{KeyboardDialog:u["a"],"el-card":d.a,"el-row":c.a,"el-col":o.a},mixins:[y],props:{gridId:{type:Number,default:function(){}}},watch:{trayNum(t){"gridSearch"===this.currentType?this.gridSearch=t:"goodsCodeSearch"===this.currentType?this.goodsCodeSearch=t:"goodsDescrSearch"===this.currentType?this.goodsDescrSearch=t:"inventorySearch"===this.currentType&&(this.inventorySearch=t),this.handleSearch()},gridId:{handler(t){this.$emit("update:gridId",t)}}},data(){return{selectedName:"",selectedId:0,currentType:"",trayNum:void 0,showLetterKeyboardDialog:!1,data:[],filteredData:[],tableData:[],gridSearch:void 0,goodsCodeSearch:void 0,inventorySearch:void 0,locationSearch:void 0,dataOld:this.$genInitFromSchema("nasl.collection.List<app.structures.TrayPickingByGridDto>",void 0),isClean:!1,goodsDescrSearch:void 0,"private-data-source-cache":new Map,instructionStatus:"",category:"",commandPosition:0,attribute1:"",attribute2:"",attribute3:""}},computed:{...Object(p["b"])(["getUserResource","getRouteData"]),userResource(){return this.getUserResource},routeData(){return this.getRouteData}},meta:{title:"栅格模式",crumb:void 0,crumbI18n:void 0,first:void 0,auth:void 0},methods:{statusDescription(t){return t.instructionStatus?t.instructionStatus.includes("E")&&!t.instructionStatus.includes("W")?"执行":t.instructionStatus.includes("E")&&t.instructionStatus.includes("W")?"局部执行":t.instructionStatus.includes("W")?"等待":t.instructionStatus.includes("I")?"请求":"未知状态":""},hasPermission(t){const e=this.routeData,r=e=>{const r=e.find(e=>e.name===t);return r?r.path:null},a=r(e);return console.log(a),console.log(a),this.userResource.includes(a)},handleSearch(){this.filteredData=this.data.filter(t=>{let e=!0;return this.gridSearch&&!t.instructionName.includes(this.gridSearch)&&(e=!1),this.goodsCodeSearch&&!t.description.includes(this.goodsCodeSearch)&&(e=!1),this.goodsDescrSearch&&!t.equipmentCode.includes(this.goodsDescrSearch)&&(e=!1),this.inventorySearch&&!t.instructionStatus.includes(this.inventorySearch)&&(e=!1),e})},handleRowClick(t,e,r){this.$refs.tableView.setCurrentRow(t),this.selectedId=t.instructionId,this.selectedName=t.instructionName,this.instructionStatus=t.instructionStatus,this.category="P"===t.instructionType?"出库":"I"===t.instructionType?"盘点":"V"===t.instructionType?"入库":"",this.commandPosition="",this.attribute1=t.attribute1,this.attribute2=t.attribute2,this.attribute3=t.attribute3},async loadData(){try{const t=await h["a"].get("/rest/queue/list",{params:{equipmentCode:1}});if(!t.data.result||!Array.isArray(t.data.result))return void(this.data=[]);const e=Array.from(new Set(t.data.result.map(t=>t.instructionName))),r=e.join(",");console.log(e);const a=await h["a"].get("/rest/v2/api/instruction/list",{params:{equipmentCode:1,instructionNameList:r}});this.data=a.data.result,this.filteredData=this.data}catch(t){throw console.error("请求失败:",t),t}},onTestDataInputFocus(t,e){this.currentType=t,this.trayNum=e,this.showLetterKeyboardDialog=!0},async showGridByTray_created(t){await(async()=>{this.$global.frontendVariables.pageName="1.4.2 |  任务清单",await(async()=>{const t=document.documentElement;t.style.setProperty("--table-view-head-title-sortable-hover","#0050AB")})(),await this.loadData()})()},async button_2W_38_click(t){await this.$router.push({path:"/dashboard/operateData/rowBatchOrder",query:{id:this.selectedId,name:this.selectedName}})},async button_stop(t){const e="任务清单 -执行-取消",r=btoa(unescape(encodeURIComponent(e)));try{await h["a"].post("/rest/instructionStop",{params:{instructionNamaList:this.selectedName,delAllFlag:!0}},{headers:{"X-Operation-Name":r}})}catch(a){throw console.error("请求失败:",a),a}},async button_run(t){if(null==this.selectedName||""===this.selectedName)return void await this.$toast.warning(this.$utils["ToString"]("nasl.core.String","请选择要执行的指令！"));if(this.instructionStatus.includes("E")&&!this.instructionStatus.includes("W")&&!this.instructionStatus.includes("I"))return void await this.$toast.error(this.$utils["ToString"]("nasl.core.String","该指令无可执行行列"));let e=this.category;if("V"===e)try{await h["a"].post("/rest/instructionIn",{params:{instructionNamaList:this.selectedName,delAllFlag:!0}},{headers:{"X-Operation-Name":encodedName}})}catch(r){throw console.error("请求失败:",r),r}else if("P"===e)try{await h["a"].post("/rest/instructionOut",{params:{instructionNamaList:this.selectedName,delAllFlag:!0}},{headers:{"X-Operation-Name":encodedName}})}catch(r){throw console.error("请求失败:",r),r}else try{await h["a"].post("/rest/instructionStock",{params:{instructionNamaList:this.selectedName,delAllFlag:!0}},{headers:{"X-Operation-Name":encodedName}})}catch(r){throw console.error("请求失败:",r),r}},__isShallowEqualArray(t,e){return t.length===e.length&&t.every((t,r)=>{const a=e[r];return typeof t===typeof a&&("string"===typeof t?t===a:"object"===typeof t&&["item","index","rowIndex","columnIndex","value"].every(e=>t[e]===a[e]))})},__getDataSourceCacheFn(t,e=[]){if(!e.length)return this["private-data-source-cache"].get(t);for(let[r,a]of this["private-data-source-cache"].entries())if(this.__isShallowEqualArray(r,[t,...e]))return a},__setDataSourceCacheFn(t,e=[],r){e.length?this["private-data-source-cache"].set([t,...e],r):this["private-data-source-cache"].set(t,r)},__getOrCreateDataSource(t,e=[],r){let a=this.__getDataSourceCacheFn(t,e);return a||(a=r,this.__setDataSourceCacheFn(t,e,a)),a},onSync_State(t,e,r){this[`${t}_state_${e}`]=r}},async created(){await this.showGridByTray_created()}},m=g,_=(r("2a21"),r("2877")),f=Object(_["a"])(m,a,s,!1,null,"37ae00a0",null);e["default"]=f.exports},"96d6":function(t,e,r){},b7ef:function(t,e,r){"use strict";var a=r("23e7"),s=r("cfe9"),i=r("d066"),o=r("5c6c"),n=r("9bf2").f,c=r("1a2d"),l=r("19aa"),d=r("7156"),u=r("e391"),h=r("cf98"),p=r("0d26"),y=r("83ab"),g=r("c430"),m="DOMException",_=i("Error"),f=i(m),w=function(){l(this,S);var t=arguments.length,e=u(t<1?void 0:arguments[0]),r=u(t<2?void 0:arguments[1],"Error"),a=new f(e,r),s=new _(e);return s.name=m,n(a,"stack",o(1,p(s.stack,1))),d(a,this,w),a},S=w.prototype=f.prototype,v="stack"in new _(m),b="stack"in new f(1,2),E=f&&y&&Object.getOwnPropertyDescriptor(s,m),R=!!E&&!(E.writable&&E.configurable),D=v&&!R&&!b;a({global:!0,constructor:!0,forced:g||D},{DOMException:D?w:f});var N=i(m),x=N.prototype;if(x.constructor!==N)for(var C in g||n(x,"constructor",o(1,N)),h)if(c(h,C)){var I=h[C],T=I.s;c(N,T)||n(N,T,o(6,I.c))}},cf98:function(t,e,r){"use strict";t.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}}}]);