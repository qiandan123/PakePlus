(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-40455030"],{"177b":function(t,e,i){},"36cb":function(t,e,i){"use strict";i("177b")},"601f":function(t,e,i){},"69d3":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{visible:t.dialogVisible,"custom-class":"device-loading-dialog","show-close":!1,width:"400px","append-to-body":""},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("div",{staticClass:"dialog-content"},[i("div",{staticClass:"loading-animation"},[i("img",{attrs:{src:t.loadingGif,alt:"loading"}})]),i("div",{staticClass:"status-text"},[i("span",{staticClass:"main-text"},[t._v(t._s(t.text.main))]),i("span",{staticClass:"sub-text"},[t._v(t._s(t.text.sub))])]),i("div",{staticClass:"action-buttons"},[i("el-button",{staticClass:"cancel-btn",style:t.buttonStyle,on:{click:t.handleCancel}},[t._v(" "+t._s(t.cancelText)+" ")])],1)])])],1)},r=[],s={name:"device-loading-dialog",props:{visible:Boolean,text:{type:Object,default:()=>({main:"读取中",sub:"读取中...请不要关闭弹窗"})},cancelText:{type:String,default:"取 消"}},data(){return{loadingGif:i("12ae"),buttonStyle:{background:"linear-gradient(180deg, #a8b8ca 0%, #6b7886 100%)",color:"#ffffff",fontSize:"26px",borderRadius:"8px",width:"160px",height:"64px",border:"none"}}},computed:{dialogVisible:{get(){return this.visible},set(t){this.$emit("update:visible",t)}}},methods:{handleCancel(){this.$emit("cancel"),this.dialogVisible=!1}}},o=s,n=(i("36cb"),i("db74"),i("2877")),l=Object(n["a"])(o,a,r,!1,null,"e0e9b01e",null);e["a"]=l.exports},db74:function(t,e,i){"use strict";i("601f")},e96d:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("u-linear-layout",{ref:"linear_layout_kt_1",attrs:{gap:"none"}},[i("u-linear-layout",{ref:"linear_layout_kt_10",class:"cw-style-height cw-style-margin-top cw-style-margin",staticStyle:{"--cw-style-height":"auto","--cw-style-margin-top":"12px","margin-top":"12px","--update-key":"1q39",overflow:"auto",height:"auto"},attrs:{direction:"horizontal",wrap:!0}},[i("u-linear-layout",{ref:"linear_layout_kt_11",class:"cw-style-width",staticStyle:{"--cw-style-width":"100%",width:"100%",height:"auto"},attrs:{direction:"horizontal",wrap:!0}},[i("u-divider",{ref:"divider_1",attrs:{dashed:"a",contentPosition:"center"}},[i("u-text",{ref:"text_965",staticStyle:{"--cw-style-font-size":"20px","--cw-style-color":"#ffffff",color:"#ffffff","font-size":"20px"},attrs:{text:"机器数据备份 ",display:"inline"}})],1),i("u-grid-layout-row",{ref:"grid_layout_row_2W_3",class:"cw-style-height cw-style-margin-left cw-style-margin cw-style-margin-bottom cw-style-margin-top cw-style-margin-right",staticStyle:{"--cw-style-height":"31vh","--cw-style-margin-left":"0px","--cw-style-margin-bottom":"8px","--cw-style-margin-top":"0px","--cw-style-margin-right":"0px","margin-left":"0px","--update-key":"a2yg","margin-right":"0px","margin-top":"0px","margin-bottom":"8px",height:"auto"},attrs:{repeat:24}},[i("u-linear-layout",{ref:"linear_layout_kt_12",staticStyle:{"--cw-style-width":"100%",width:"100%"},attrs:{direction:"horizontal",wrap:!0}},[i("u-linear-layout",{ref:"bottom_buttons",class:"cw-style-height cw-style-background-color",staticStyle:{"--cw-style-height":"100px","--cw-style-background-color":"#2c3e50",height:"120px","background-color":"#2c3e50",width:"100%"},attrs:{direction:"horizontal",wrap:!0}},[i("u-grid-layout-row",{ref:"grid_layout_row_2W_3",class:"cw-style-height cw-style-margin-left cw-style-margin cw-style-margin-bottom cw-style-margin-top cw-style-margin-right",staticStyle:{"--cw-style-height":"31vh","--cw-style-margin-left":"0px","--cw-style-margin-bottom":"8px","--cw-style-margin-top":"0px","--cw-style-margin-right":"0px","margin-left":"0px","--update-key":"a2yg","margin-right":"0px","margin-top":"0px","margin-bottom":"8px",height:"40%",width:"100%"},attrs:{repeat:24}},[i("u-text",{ref:"instruction_label",class:"cw-style-height cw-style-color",staticStyle:{"--cw-style-height":"40px","--cw-style-color":"#ffffff","font-size":"20px","margin-left":"15px",width:"100px",height:"40px",color:"#ffffff",display:"flex","align-items":"center","justify-content":"flex-end","padding-right":"10px"},attrs:{text:"备份地址"}}),i("u-linear-layout",{ref:"instruction_input_container",class:"cw-style-height",staticStyle:{"cw-style-height":"40px",height:"50px",width:"900px",border:"2px solid #0078d7","background-color":"#f6f2f2",display:"flex","align-items":"center","justify-content":"center"},attrs:{direction:"horizontal",wrap:!0}},[i("u-input",{key:"number_input_backup",ref:"number_input_backup",class:"cw-style-border-style cw-style-border-left-width cw-style-border-width cw-style-border-right-width cw-style-border-top-width cw-style-border-bottom-width cw-style-border-top-left-radius cw-style-border-radius cw-style-border-top-right-radius cw-style-border-bottom-left-radius cw-style-border-bottom-right-radius",staticStyle:{height:"45px",width:"900px","--cw-style-border-style":"solid","--cw-style-border-left-width":"0px","--cw-style-border-right-width":"0px","--cw-style-border-top-width":"0px","--cw-style-border-bottom-width":"0px","--cw-style-border-top-left-radius":"0px","--cw-style-border-top-right-radius":"0px","--cw-style-border-bottom-left-radius":"0px","--cw-style-border-bottom-right-radius":"0px","border-top-left-radius":"0px","border-top-right-radius":"0px","border-bottom-right-radius":"0px","border-bottom-left-radius":"0px","--update-key":"3nnv","border-top-width":"0px","border-left-width":"0px","border-right-width":"0px","border-bottom-width":"0px","border-style":"solid","--number-input-button-padding":"0 0px"},attrs:{value:t.gridSearch,hideButtons:!0,clearable:!0},on:{"update:value":function(e){t.gridSearch=e},focus:function(e){return t.onTestDataInputFocus("gridSearch",t.gridSearch)}}})],1)],1),i("u-button",{directives:[{name:"longpress",rawName:"v-longpress"}],key:"button_2W_38",ref:"button_2W_38",class:"cw-style-width cw-style-height cw-style-padding-top cw-style-padding cw-style-margin-bottom cw-style-margin cw-style-margin-right cw-style-font-size",staticStyle:{"--cw-style-width":"30.33%","--cw-style-height":"50px","--cw-style-padding-top":"13px","--cw-style-margin-bottom":"8px","--cw-style-margin-right":"8px","--cw-style-font-size":"26px",height:"60px","--update-key":"kdod","margin-left":"765px","padding-top":"13px","font-size":"26px","margin-right":"8px",width:"24.33%","margin-bottom":"8px","--custom-start":"auto",background:"linear-gradient(180deg, #4a90e2 0%, #4a90e2 100%)"},attrs:{color:"primary",text:"备份"},on:{mouseup:function(e){return t.savePlcData(e)}}})],1),i("u-linear-layout",{ref:"bottom_buttons",class:"cw-style-height cw-style-background-color",staticStyle:{"--cw-style-height":"100px","--cw-style-background-color":"#2c3e50",height:"350px","background-color":"#2c3e50",width:"100%"},attrs:{direction:"horizontal",wrap:!0}},[i("u-divider",{ref:"divider_1",attrs:{dashed:"a",contentPosition:"center"}},[i("u-text",{ref:"text_965",staticStyle:{"--cw-style-font-size":"20px","--cw-style-color":"#ffffff",color:"#ffffff","font-size":"20px"},attrs:{text:"日志 ",display:"inline"}})],1),i("u-grid-layout-row",{ref:"grid_layout_row_2W_3",class:"cw-style-height cw-style-margin-left cw-style-margin cw-style-margin-bottom cw-style-margin-top cw-style-margin-right",staticStyle:{"--cw-style-height":"31vh","--cw-style-margin-left":"0px","--cw-style-margin-bottom":"8px","--cw-style-margin-top":"0px","--cw-style-margin-right":"0px","margin-left":"0px","--update-key":"a2yg","margin-right":"0px","margin-top":"0px","margin-bottom":"8px",height:"10%"},attrs:{repeat:24}},[i("u-linear-layout",{ref:"instruction_input_container",class:"cw-style-height",staticStyle:{"cw-style-height":"40px","margin-left":"15px",height:"300px",width:"1000px",border:"2px solid #0078d7","background-color":"#f6f2f2",display:"flex","align-items":"center","justify-content":"center"},attrs:{direction:"horizontal",wrap:!0}},[i("textarea",{staticStyle:{width:"1000px",height:"300px","font-size":"18px"},attrs:{id:"textArea",rows:"10",cols:"50"}}),i("br")])],1)],1)],1)],1)],1)],1),i("KeyboardDialog",{attrs:{input:t.gridSearch},on:{"update:input":function(e){t.gridSearch=e}},model:{value:t.showLetterKeyboardDialog,callback:function(e){t.showLetterKeyboardDialog=e},expression:"showLetterKeyboardDialog"}}),i("DeviceLoadingDialog",{attrs:{visible:t.loadingDialogVisible}})],1)},r=[],s=i("8617"),o=i("65b2"),n=i("69d3");const l={mounted(){document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.onKeyUp)},beforeDestroy(){document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp)},methods:{async onKeyDown(t){},async onKeyUp(t){}}};var c={components:{DeviceLoadingDialog:n["a"],KeyboardDialog:s["a"]},mixins:[l],props:{gridId:{type:Number,default:function(){}}},watch:{gridId:{handler(t){this.$emit("update:gridId",t)}}},data(){return{loadingDialogVisible:!1,backupLog:"",currentType:"",trayNum:void 0,showLetterKeyboardDialog:!1,data:this.$genInitFromSchema("nasl.collection.List<app.structures.TrayPickingByGridDto>",void 0),gridSearch:void 0,goodsCodeSearch:void 0,inventorySearch:void 0,locationSearch:void 0,dataOld:this.$genInitFromSchema("nasl.collection.List<app.structures.TrayPickingByGridDto>",void 0),isClean:!1,goodsDescrSearch:void 0,lastInsertPos:0,"private-data-source-cache":new Map}},computed:{},meta:{title:"栅格模式",crumb:void 0,crumbI18n:void 0,first:void 0,auth:void 0},methods:{async insertText(t){let e=textArea.value;this.lastInsertPos>0&&(e=e.substring(0,this.lastInsertPos)+"\n"+e.substring(this.lastInsertPos),this.lastInsertPos++),e=e.substring(0,this.lastInsertPos)+t+e.substring(this.lastInsertPos),textArea.value=e,this.lastInsertPos+=t.length,textArea.selectionStart=textArea.selectionEnd=this.lastInsertPos},getFormattedDate(){const t=new Date,e=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0"),r=String(t.getHours()).padStart(2,"0"),s=String(t.getMinutes()).padStart(2,"0"),o=String(t.getSeconds()).padStart(2,"0");return`${e}-${i}-${a} ${r}:${s}:${o}`},async savePlcData(){await(async()=>{const t=encodeURIComponent(this.gridSearch);await this.insertText(this.getFormattedDate()+"---开始备份----------"),this.loadingDialogVisible=!0;let e=await o["a"].get("/gw/screenDev/v1/sys/machine/getBackupPLCData?filePath="+t,{headers:{"X-Operation-Name":"55m75b2V55WM6Z2iIC0g54K55Ye755m75b2V5oyJ6ZKu"}});200===e.data.code?(console.log("保存数据成功"),await this.insertText(this.getFormattedDate()+"---备份成功，所在路径:"+e.data.result),await this.$toast.success("保存数据成功"),this.loadingDialogVisible=!1):(await this.insertText(this.getFormattedDate()+"---备份失败，失败原因:"+e.data.message),await this.$toast.error(e.data.message),this.loadingDialogVisible=!1)})()},onTestDataInputFocus(t,e){this.currentType=t,this.trayNum=e,this.showLetterKeyboardDialog=!0}},async created(){let t=await o["a"].get("/gw/screenDev/v1/sys/machine/getTmpFilePath");this.gridSearch=t.data.result}},d=c,g=i("2877"),h=Object(g["a"])(d,a,r,!1,null,null,null);e["default"]=h.exports}}]);