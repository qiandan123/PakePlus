(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-35e944a3"],{"003c":function(t,e,r){"use strict";r("1fc0")},"1d27":function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("u-linear-layout",{ref:"uLinearLayout1",class:"cw-style-height",staticStyle:{"--cw-style-height":"100%",height:"100%","min-height":"618px"},attrs:{type:"root",gap:"none"}},[r("u-linear-layout",{ref:"linear_layout_1",attrs:{direction:"horizontal",wrap:!0}},[r("u-linear-layout",{ref:"linear_layout_2",class:"cw-style-margin-left cw-style-margin cw-style-margin-bottom cw-style-margin-top cw-style-margin-right",staticStyle:{"--cw-style-margin-left":"10px","--cw-style-margin-bottom":"10px","--cw-style-margin-top":"10px","--cw-style-margin-right":"10px","margin-left":"10px","--update-key":"khum","margin-right":"10px","margin-bottom":"10px","margin-top":"10px"},attrs:{direction:"horizontal",wrap:!0,justify:"start"}},[r("u-text",{ref:"text_5",class:"cw-style-font-size cw-style-color cw-style-border-color",staticStyle:{"--cw-style-font-size":"20px","--cw-style-color":"#ffffff","--cw-style-border-color":"#ffffff","border-color":"#ffffff",color:"#ffffff","font-size":"20px"},attrs:{text:"当前用户"}})],1)],1),r("u-linear-layout",{ref:"linear_layout_3",class:"cw-style-height cw-style-text-align cw-style-background-color cw-style-margin-left cw-style-margin cw-style-margin-right cw-style-color cw-style-border-style cw-style-border-color cw-style-border-top-left-radius cw-style-border-radius cw-style-border-top-right-radius cw-style-border-bottom-left-radius cw-style-border-bottom-right-radius",staticStyle:{"--cw-style-height":"60px","--cw-style-text-align":"center","--cw-style-margin-left":"10px","--cw-style-margin-right":"10px","--cw-style-color":"#ffffff","--cw-style-border-style":"solid","--cw-style-border-color":"#34383f","--cw-style-border-top-left-radius":"5px","--cw-style-border-top-right-radius":"5px","--cw-style-border-bottom-left-radius":"5px","--cw-style-border-bottom-right-radius":"5px","border-color":"#34383f","border-top-left-radius":"5px","border-top-right-radius":"5px","border-bottom-right-radius":"5px","border-bottom-left-radius":"5px","--update-key":"y71i","border-style":"solid","margin-left":"10px","margin-right":"10px",color:"#ffffff",height:"60px","text-align":"center"},style:{"background-color":"#34383f","--cw-style-background-color":"#34383f"},attrs:{direction:"vertical",mode:"block",justify:"center",layout:"block"}},[r("u-grid-layout",{ref:"grid_layout_2"},[r("u-grid-layout-row",{ref:"grid_layout_row_2",attrs:{repeat:24}},[r("u-grid-layout-column",{ref:"grid_layout_column_4",class:"cw-style-text-align",staticStyle:{"--cw-style-text-align":"left","text-align":"left"},attrs:{span:12,wrap:!0}},[r("u-text",{ref:"text_12",class:"cw-style-margin-left cw-style-margin cw-style-font-size",staticStyle:{"--cw-style-margin-left":"10px","--cw-style-font-size":"24px","margin-left":"10px","--update-key":"1nv7","font-size":"24px",position:"relative",left:"0",top:"6px"},attrs:{size:"large",text:"当前用户"}})],1),r("u-grid-layout-column",{ref:"grid_layout_column_5",class:"cw-style-text-align",staticStyle:{"--cw-style-text-align":"right","text-align":"right"},attrs:{span:12,wrap:!0}},[r("u-text",{ref:"text_16",class:"cw-style-text-align cw-style-margin-right cw-style-margin cw-style-font-size",staticStyle:{"--cw-style-text-align":"center","--cw-style-margin-right":"10px","--cw-style-font-size":"24px","font-size":"24px","margin-right":"35px","--update-key":"gw2y","text-align":"center",position:"relative",left:"0",top:"6px"},attrs:{size:"large",text:t.$utils["ToString"]("nasl.core.String",t.currentUserInfo.userName)}})],1)],1)],1)],1),r("u-linear-layout",{ref:"linear_layout_4",class:"cw-style-margin-left cw-style-margin cw-style-margin-bottom cw-style-margin-top cw-style-margin-right",staticStyle:{"--cw-style-margin-left":"10px","--cw-style-margin-bottom":"10px","--cw-style-margin-top":"10px","--cw-style-margin-right":"10px","margin-left":"10px","--update-key":"kge1","margin-right":"10px","margin-top":"10px","margin-bottom":"10px"},attrs:{direction:"horizontal",wrap:!0}},[r("u-text",{ref:"text_8",class:"cw-style-font-size cw-style-color cw-style-border-color",staticStyle:{"--cw-style-font-size":"20px","--cw-style-color":"#ffffff","--cw-style-border-color":"#ffffff","border-color":"#ffffff",color:"#ffffff","font-size":"20px"},attrs:{text:"用户配置"}})],1),r("u-linear-layout",{ref:"linear_layout_6",class:"cw-style-height cw-style-text-align cw-style-background-color cw-style-margin-left cw-style-margin cw-style-margin-right cw-style-color cw-style-border-style cw-style-border-color cw-style-border-top-left-radius cw-style-border-radius cw-style-border-top-right-radius cw-style-border-bottom-left-radius cw-style-border-bottom-right-radius",staticStyle:{"--cw-style-height":"60px","--cw-style-text-align":"center","--cw-style-margin-left":"10px","--cw-style-margin-right":"10px","--cw-style-color":"#ffffff","--cw-style-border-style":"solid","--cw-style-border-color":"#34383f","--cw-style-border-top-left-radius":"5px","--cw-style-border-top-right-radius":"5px","--cw-style-border-bottom-left-radius":"5px","--cw-style-border-bottom-right-radius":"5px","border-color":"#34383f","border-top-left-radius":"5px","border-top-right-radius":"5px","border-bottom-right-radius":"5px","border-bottom-left-radius":"5px","--update-key":"y71i","border-style":"solid","margin-left":"10px","margin-right":"10px",color:"#ffffff",height:"60px","text-align":"center"},style:{"background-color":"#34383f","--cw-style-background-color":"#34383f"},attrs:{direction:"vertical",mode:"block",justify:"center",layout:"block"}},[r("u-grid-layout",{ref:"grid_layout_4"},[r("u-grid-layout-row",{ref:"grid_layout_row_4",attrs:{repeat:24}},[r("u-grid-layout-column",{ref:"grid_layout_column_8",class:"cw-style-text-align",staticStyle:{"--cw-style-text-align":"left","text-align":"left"},attrs:{span:12,wrap:!0}},[r("u-text",{ref:"text_18",class:"cw-style-margin-left cw-style-margin cw-style-font-size",staticStyle:{"--cw-style-margin-left":"10px","--cw-style-font-size":"24px","margin-left":"10px","--update-key":"1nv7","font-size":"24px",position:"relative",left:"0",top:"6px"},attrs:{size:"large",text:"自动注销间隔(分钟)"}})],1),r("u-grid-layout-column",{ref:"grid_layout_column_2000",class:"cw-style-text-align",staticStyle:{"--cw-style-text-align":"right","text-align":"right"},attrs:{span:12,wrap:!0}},[r("div",{staticStyle:{cursor:"pointer"},on:{mouseup:function(e){return t.onNumberInputFocus(t.logOutInterval)}}},[r("u-text",{ref:"text_2000",class:"cw-style-text-align cw-style-margin-right cw-style-margin cw-style-font-size",staticStyle:{"--cw-style-text-align":"center","--cw-style-margin-right":"10px","--cw-style-font-size":"24px","font-size":"24px","margin-right":"10px","--update-key":"gw2y","text-align":"center",position:"relative",left:"0",top:"6px"},attrs:{size:"large",text:t.$utils["ToString"]("nasl.core.String",t.logOutInterval)},on:{change:function(e){return t.changeLogOutInterval()}}}),r("i-ico",{ref:"ico_2000",class:"cw-style-font-size",staticStyle:{"--cw-style-font-size":"24px","font-size":"24px",position:"relative",left:"0",top:"6px"},attrs:{name:"right-arrow",icotype:"only"}},[r("u-text",{ref:"text_2001",attrs:{text:"图标"}})],1)],1)])],1)],1)],1),r("u-linear-layout",{ref:"linear_layout_5",class:"cw-style-height cw-style-text-align cw-style-background-color cw-style-margin-left cw-style-margin cw-style-margin-right cw-style-color cw-style-border-style cw-style-border-color cw-style-border-top-left-radius cw-style-border-radius cw-style-border-top-right-radius cw-style-border-bottom-left-radius cw-style-border-bottom-right-radius",staticStyle:{"--cw-style-height":"60px","--cw-style-text-align":"center","--cw-style-margin-left":"10px","--cw-style-margin-right":"10px","--cw-style-color":"#ffffff","--cw-style-border-style":"solid","--cw-style-border-color":"#34383f","--cw-style-border-top-left-radius":"5px","--cw-style-border-top-right-radius":"5px","--cw-style-border-bottom-left-radius":"5px","--cw-style-border-bottom-right-radius":"5px","border-color":"#34383f","border-top-left-radius":"5px","border-top-right-radius":"5px","border-bottom-right-radius":"5px","border-bottom-left-radius":"5px","--update-key":"y71i","border-style":"solid","margin-left":"10px","margin-right":"10px",color:"#ffffff",height:"60px","text-align":"center"},style:{"background-color":"#34383f","--cw-style-background-color":"#34383f"},attrs:{direction:"vertical",mode:"block",justify:"center",layout:"block"}},[r("u-grid-layout",{ref:"grid_layout_3"},[r("u-grid-layout-row",{ref:"grid_layout_row_3",attrs:{repeat:24}},[r("u-grid-layout-column",{ref:"grid_layout_column_6",class:"cw-style-text-align",staticStyle:{"--cw-style-text-align":"left","text-align":"left"},attrs:{span:12,wrap:!0}},[r("u-text",{ref:"text_13",class:"cw-style-margin-left cw-style-margin cw-style-font-size",staticStyle:{"--cw-style-margin-left":"10px","--cw-style-font-size":"24px","margin-left":"10px","--update-key":"1nv7","font-size":"24px",position:"relative",left:"0",top:"6px"},attrs:{size:"large",text:"界面语言"}})],1),r("u-grid-layout-column",{ref:"grid_layout_column_7",class:"cw-style-text-align",staticStyle:{"--cw-style-text-align":"right","text-align":"right"},attrs:{span:12,wrap:!0}},[r("div",{staticStyle:{cursor:"pointer"},on:{mouseup:function(e){return t.changeLanguage()}}},[r("u-text",{ref:"text_17",class:"cw-style-text-align cw-style-margin-right cw-style-margin cw-style-font-size",staticStyle:{"--cw-style-text-align":"center","--cw-style-margin-right":"10px","--cw-style-font-size":"24px","font-size":"24px","margin-right":"10px","--update-key":"gw2y","text-align":"center",position:"relative",left:"0",top:"6px"},attrs:{size:"large",text:t.$utils["ToString"]("nasl.core.String",t.currentUserInfo.userLanguage)}}),r("i-ico",{ref:"ico_3",class:"cw-style-font-size",staticStyle:{"--cw-style-font-size":"24px","font-size":"24px",position:"relative",left:"0",top:"6px"},attrs:{name:"right-arrow",icotype:"only"}},[r("u-text",{ref:"text_15",attrs:{text:"图标"}})],1)],1)])],1)],1)],1),r("u-linear-layout",{ref:"linear_layout_8",class:"cw-style-height cw-style-text-align cw-style-background-color cw-style-margin-left cw-style-margin cw-style-margin-right cw-style-color cw-style-border-style cw-style-border-color cw-style-border-top-left-radius cw-style-border-radius cw-style-border-top-right-radius cw-style-border-bottom-left-radius cw-style-border-bottom-right-radius",staticStyle:{"--cw-style-height":"60px","--cw-style-text-align":"center","--cw-style-margin-left":"10px","--cw-style-margin-right":"10px","--cw-style-color":"#ffffff","--cw-style-border-style":"solid","--cw-style-border-color":"#34383f","--cw-style-border-top-left-radius":"5px","--cw-style-border-top-right-radius":"5px","--cw-style-border-bottom-left-radius":"5px","--cw-style-border-bottom-right-radius":"5px","border-color":"#34383f","border-top-left-radius":"5px","border-top-right-radius":"5px","border-bottom-right-radius":"5px","border-bottom-left-radius":"5px","--update-key":"y71i","border-style":"solid","margin-left":"10px","margin-right":"10px",color:"#ffffff",height:"60px","text-align":"center"},style:{"background-color":"#34383f","--cw-style-background-color":"#34383f"},attrs:{direction:"vertical",mode:"block",justify:"center",layout:"block"}},[r("u-grid-layout",{ref:"grid_layout_6"},[r("u-grid-layout-row",{ref:"grid_layout_row_6",attrs:{repeat:24}},[r("u-grid-layout-column",{ref:"grid_layout_column_12",class:"cw-style-text-align",staticStyle:{"--cw-style-text-align":"left","text-align":"left"},attrs:{span:12,wrap:!0}},[r("u-text",{ref:"text_24",class:"cw-style-margin-left cw-style-margin cw-style-font-size",staticStyle:{"--cw-style-margin-left":"10px","--cw-style-font-size":"24px","margin-left":"10px","--update-key":"1nv7","font-size":"24px",position:"relative",left:"0",top:"6px"},attrs:{size:"large",text:"登出时机上有货盘的警报"}})],1),r("u-grid-layout-column",{ref:"grid_layout_column_9",class:"cw-style-text-align",staticStyle:{"--cw-style-text-align":"right","text-align":"right"},attrs:{span:12,wrap:!0}},[r("u-switch",{ref:"switch_2",class:"cw-style-text-align cw-style-margin-top cw-style-margin cw-style-margin-right cw-style-font-size",staticStyle:{"--cw-style-text-align":"center","--cw-style-margin-top":"12px","--cw-style-margin-right":"10px","--cw-style-font-size":"24px","font-size":"24px","margin-right":"10px","--update-key":"2kcl","text-align":"center","--switch-button-size":"30px","--switch-width":"60px","--switch-height":"30px","--switch-button-space":"2px","margin-top":"12px"},on:{change:function(e){return t.taskRunningWarning(e,"showWarning")}},model:{value:t.trayWarning,callback:function(e){t.trayWarning=e},expression:"trayWarning"}})],1)],1)],1)],1),r("u-linear-layout",{ref:"linear_layout_12",class:"cw-style-height cw-style-text-align cw-style-background-color cw-style-margin-left cw-style-margin cw-style-margin-right cw-style-color cw-style-border-style cw-style-border-color cw-style-border-top-left-radius cw-style-border-radius cw-style-border-top-right-radius cw-style-border-bottom-left-radius cw-style-border-bottom-right-radius",staticStyle:{"--cw-style-height":"60px","--cw-style-text-align":"center","--cw-style-margin-left":"10px","--cw-style-margin-right":"10px","--cw-style-color":"#ffffff","--cw-style-border-style":"solid","--cw-style-border-color":"#34383f","--cw-style-border-top-left-radius":"5px","--cw-style-border-top-right-radius":"5px","--cw-style-border-bottom-left-radius":"5px","--cw-style-border-bottom-right-radius":"5px","border-color":"#34383f","border-top-left-radius":"5px","border-top-right-radius":"5px","border-bottom-right-radius":"5px","border-bottom-left-radius":"5px","--update-key":"y71i","border-style":"solid","margin-left":"10px","margin-right":"10px",color:"#ffffff",height:"60px","text-align":"center"},style:{"background-color":"#34383f","--cw-style-background-color":"#34383f"},attrs:{direction:"vertical",mode:"block",justify:"center",layout:"block"}},[r("u-grid-layout",{ref:"grid_layout_10"},[r("u-grid-layout-row",{ref:"grid_layout_row_10",attrs:{repeat:24}},[r("u-grid-layout-column",{ref:"grid_layout_column_20",class:"cw-style-text-align",staticStyle:{"--cw-style-text-align":"left","text-align":"left"},attrs:{span:12,wrap:!0}},[r("u-text",{ref:"text_36",class:"cw-style-margin-left cw-style-margin cw-style-font-size",staticStyle:{"--cw-style-margin-left":"10px","--cw-style-font-size":"24px","margin-left":"10px","--update-key":"1nv7","font-size":"24px",position:"relative",left:"0",top:"6px"},attrs:{size:"large",text:"提取托盘"}})],1),r("u-grid-layout-column",{ref:"grid_layout_column_1000",class:"cw-style-text-align",staticStyle:{"--cw-style-text-align":"right","text-align":"right"},attrs:{span:12,wrap:!0}},[r("u-switch",{ref:"switch_2000",class:"cw-style-text-align cw-style-margin-top cw-style-margin cw-style-margin-right cw-style-font-size",staticStyle:{"--cw-style-text-align":"center","--cw-style-margin-top":"12px","--cw-style-margin-right":"10px","--cw-style-font-size":"24px","font-size":"24px","margin-right":"10px","--update-key":"2kcl","text-align":"center","--switch-button-size":"30px","--switch-width":"60px","--switch-height":"30px","--switch-button-space":"2px","margin-top":"12px"},on:{change:function(e){return t.taskRunningWarning(e,"extractTray")}},model:{value:t.extractTraySwitch,callback:function(e){t.extractTraySwitch=e},expression:"extractTraySwitch"}})],1)],1)],1)],1),r("div",{staticClass:"pallet-inventory"},[r("div",{staticClass:"content-box"},[r("router-view")],1),r("div",{staticClass:"bottom-btn"},[t.hasPermission("ROLE")?r("el-button",{directives:[{name:"longpress",rawName:"v-longpress"}],attrs:{type:"warning"},on:{click:function(e){return t.jumpToRole()}}},[t._v("角色")]):t._e(),t.hasPermission("PERMISSION")?r("el-button",{directives:[{name:"longpress",rawName:"v-longpress"}],attrs:{type:"success"},on:{click:function(e){return t.jumpToPermission()}}},[t._v(" 权限 ")]):t._e()],1)]),r("KeyboardDialog",{attrs:{input:t.trayNum,mode:"number"},on:{"update:input":function(e){t.trayNum=e}},model:{value:t.showKeyboardDialog,callback:function(e){t.showKeyboardDialog=e},expression:"showKeyboardDialog"}})],1)},s=[],a=(r("9e1f"),r("450d"),r("6ed5")),l=r.n(a),i=(r("e9f5"),r("d866"),r("f665"),r("8617")),c=r("65b2"),n=r("4360"),y=r("2f62"),g={components:{KeyboardDialog:i["a"]},mixins:[],data(){return{"private-data-source-cache":new Map,trayNum:void 0,showKeyboardDialog:!1,logOutInterval:void 0,currentUserInfo:{userName:"",language:"",expiration:void 0},trayWarning:!1,extractTraySwitch:!1,startChange:!1}},computed:{...Object(y["b"])(["getUserResource","getRouteData"]),userResource(){return this.getUserResource},routeData(){return this.getRouteData}},watch:{trayNum(t,e){console.log("new: "+t),console.log("old: "+e),void 0!==e&&(this.logOutInterval=t,this.changeLogOutInterval())}},meta:{title:"用户",crumb:void 0,crumbI18n:void 0,first:void 0,auth:void 0},methods:{hasPermission(t){const e=this.routeData,r=e=>{const r=e.find(e=>e.name===t);return r?r.path:null},o=r(e);return this.userResource.includes(o)},async jumpToPermission(){await(async()=>{this.$destination("/dashboard/permission","_self")})()},async jumpToRole(){await(async()=>{this.$destination("/dashboard/role","_self")})()},async changeLanguage(){console.log("改变语言")},async taskRunningWarning(t,e){if(this.startChange){let r=await c["a"].get("/gw/screenDev/v1/permission/updateWarningAndTray",{params:{functionName:e,value:t.value?1:0}});200===r.data.code?this.$toast.success("修改成功"):this.$toast.error(this.$utils["ToString"]("nasl.core.String",r.data.message))}},async changeLogOutInterval(){if(this.logOutInterval<0||this.logOutInterval>9999)return void this.$toast.warning("自动注销时间范围为1-9999，请尝试重新输入");let t={username:this.currentUserInfo.userName,loginInterval:this.logOutInterval},e=await c["a"].post("/gw/screenDev/v1/permission/saveAutoLoginOutByUsername",t);200===e.data.code?(this.$toast.success("修改自动注销时间成功"),await this.dropdown_item1_click()):this.$toast.error(this.$utils["ToString"]("nasl.core.String",e.data.message))},async dropdown_item1_click(){await(async()=>{l.a.confirm("本操作需要重新登录后生效，是否重新登录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.logout()}).then(()=>{if("stop"!==this.$global.frontendVariables.runStatus)try{let t={value:"1",tagName:"HMI_bMachinePause"};c["a"].post("/gw/screenDev/v1/sys/machine/processMoreTimes",t).then(t=>{console.log("停止mouseup: "+t),200===(t||{}).data.code&&(this.$global.frontendVariables.runStatus="stop")})}catch(t){console.error(t)}}).then(()=>{this.eraseCookie(),location.reload()})})()},async logout(){await c["a"].post("/gw/screenDev/v1/sys/logout").then(()=>{n["a"].commit("CLEAR_USER_RESOURCE"),n["a"].commit("CLEAR_ROUTE_DATA"),localStorage.removeItem("token"),localStorage.removeItem("userInfo"),c["a"].defaults.headers.common["Authorization"]="",window.location.href="/login"}).catch(t=>{n["a"].commit("CLEAR_USER_RESOURCE"),n["a"].commit("CLEAR_ROUTE_DATA"),console.error("服务端清空token失败:",t),localStorage.removeItem("token"),localStorage.removeItem("userInfo"),c["a"].defaults.headers.common["Authorization"]="",c["a"].defaults.headers.common["Authorization"]="",window.location.href="/login"})},async onNumberInputFocus(t){console.log(t),this.trayNum=t,this.showKeyboardDialog=!0},__isShallowEqualArray(t,e){return t.length===e.length&&t.every((t,r)=>{const o=e[r];return typeof t===typeof o&&("string"===typeof t?t===o:"object"===typeof t&&["item","index","rowIndex","columnIndex","value"].every(e=>t[e]===o[e]))})},__getDataSourceCacheFn(t,e=[]){if(!e.length)return this["private-data-source-cache"].get(t);for(let[r,o]of this["private-data-source-cache"].entries())if(this.__isShallowEqualArray(r,[t,...e]))return o},__setDataSourceCacheFn(t,e=[],r){e.length?this["private-data-source-cache"].set([t,...e],r):this["private-data-source-cache"].set(t,r)},__getOrCreateDataSource(t,e=[],r){let o=this.__getDataSourceCacheFn(t,e);return o||(o=r,this.__setDataSourceCacheFn(t,e,o)),o},onSync_State(t,e,r){this[`${t}_state_${e}`]=r},async userInfo_created(t){await(async()=>{this.$global.frontendVariables.showAutoLogin=!0,this.$global.frontendVariables.showUserInfo=!0,this.$global.frontendVariables.isPickInstruction=!1;const t=localStorage.getItem("userInfo");this.currentUserInfo=JSON.parse(t),this.logOutInterval=this.currentUserInfo.expiration,console.log(this.currentUserInfo),await this.getUserDetail()})()},async getUserDetail(){let t=await c["a"].get("/gw/screenDev/v1/permission/getUserInfoByJwtUser");200===t.data.code&&(this.userDetail=t.data.result,this.trayWarning=1===this.userDetail.isShowWarning,this.extractTraySwitch=1===this.userDetail.isExtractTray)},async userInfo_destroyed(t){await(async()=>{this.$global.frontendVariables.showAutoLogin=!1,this.$global.frontendVariables.showUserInfo=!1})()}},async created(){this.startChange=!1,await this.userInfo_created(),this.startChange=!0},async destroyed(){await this.userInfo_destroyed()}},u=g,f=(r("003c"),r("2877")),d=Object(f["a"])(u,o,s,!1,null,"38e34607",null);e["default"]=d.exports},"1fc0":function(t,e,r){}}]);